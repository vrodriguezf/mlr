<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification --><meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84">
<title>Resampling • mlr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="Resampling">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/task.html">Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learner.html">Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/train.html">Train</a>
    </li>
    <li>
      <a href="../../articles/tutorial/predict.html">Predict</a>
    </li>
    <li>
      <a href="../../articles/tutorial/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../../articles/tutorial/performance.html">Performance</a>
    </li>
    <li>
      <a href="../../articles/tutorial/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/benchmark_experiments.html">Benchmark Experiments</a>
    </li>
    <li>
      <a href="../../articles/tutorial/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/visualization.html">Visualization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/usecase_regression.html">Use case - Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/configureMlr.html">Configuration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/wrapper.html">Wrapped Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../../articles/tutorial/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/feature_selection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/over_and_undersampling.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../../articles/tutorial/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learning_curve.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li>
      <a href="../../articles/tutorial/handling_of_spatial_data.html">Handling of Spatial Data</a>
    </li>
    <li>
      <a href="../../articles/tutorial/functional_data.html">Functional Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extending
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/create_learner.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_measure.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_imputation.html">Create Imputation Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="../../news/index.html">News</a>
    </li>
    <li>
      <a href="../../articles/tutorial/example_tasks.html">Example Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/measures.html">Implemented Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/mlr_publications.html">mlr Publications</a>
    </li>
    <li>
      <a href="../../articles/tutorial/talks_videos_workshops.html">Talks, Videos and Workshops</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    mlr-org Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/mlr-org/mlrMBO">mlrMBO</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlrCPO">mlrCPO</a>
    </li>
    <li>
      <a href="http://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    </li>
    <li>
      <a href="http://openml.github.io/openml-r/vignettes/OpenML.html">OpenML</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-blog.netlify.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Resampling</h1>
            
      
      <!--The 'toc' block was inserted manually by @pat-s. It triggeres the inline ToC in the vignettes.-->
            <div id="toc">
      <h3 class="hasAnchor">
<a href="#toc" class="anchor"></a>Table of Contents</h3>
      <ul>
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li><a href="#accessing-resample-results">Accessing resample results</a></li>
      <li><a href="#stratification-blocking-and-grouping">Stratification, Blocking and Grouping</a></li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li><a href="#aggregating-performance-values">Aggregating performance values</a></li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      
      <small>Source: <a href="https://github.com/mlr-org/mlr/blob/master/vignettes/tutorial/resample.Rmd"><code>vignettes/tutorial/resample.Rmd</code></a></small>

    </div>

    
    
<div class="contents">
<p>Resampling strategies are usually used to assess the performance of a learning algorithm: The entire data set is (repeatedly) split into training sets <span class="math inline">\(D^{*b}\)</span> and test sets <span class="math inline">\(D \setminus D^{*b}\)</span>, <span class="math inline">\(b = 1,\ldots,B\)</span>. The learner is trained on each training set, predictions are made on the corresponding test set (sometimes on the training set as well) and the performance measure <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> is calculated. Then the <span class="math inline">\(B\)</span> individual performance values are aggregated, most often by calculating the mean. There exist various different resampling strategies, for example cross-validation and bootstrap, to mention just two popular approaches.</p>
<div class="figure" style="text-align: center">
<img src="https://raw.githubusercontent.com/pat-s/mlr/master/vignettes/tutorial/devel/pdf/img/resampling.png" alt="Resampling Figure" width="600px"><p class="caption">
Resampling Figure
</p>
</div>
<p>If you want to read up on further details, the paper <a href="http://link.springer.com/chapter/10.1007%2F978-0-387-47509-7_8">Resampling Strategies for Model Assessment and Selection</a> by Simon is probably not a bad choice. Bernd has also published a paper <a href="http://www.mitpressjournals.org/doi/pdf/10.1162/EVCO_a_00069">Resampling methods for meta-model validation with recommendations for evolutionary computation</a> which contains detailed descriptions and lots of statistical background information on resampling methods.</p>
<div id="defining-the-resampling-strategy" class="section level2">
<h2 class="hasAnchor">
<a href="#defining-the-resampling-strategy" class="anchor"></a>Defining the resampling strategy</h2>
<p>In <code>mlr</code> the resampling strategy can be defined via function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. It requires a string that specifies the resampling method and, depending on the selected strategy, further information like the number of iterations. The supported resampling strategies are:</p>
<ul>
<li>Cross-validation (<code>"CV"</code>),</li>
<li>Leave-one-out cross-validation (<code>"LOO"</code>),</li>
<li>Repeated cross-validation (<code>"RepCV"</code>),</li>
<li>Out-of-bag bootstrap and other variants like <em>b632</em> (<code>"Bootstrap"</code>),</li>
<li>Subsampling, also called Monte-Carlo cross-validation (<code>"Subsample"</code>),</li>
<li>Holdout (training/test) (<code>"Holdout"</code>).</li>
</ul>
<p>For example if you want to use 3-fold cross-validation type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>For holdout estimation use:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Holdout estimation</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>In order to save you some typing <code>mlr</code> contains some pre-defined resample descriptions for very common strategies like holdout (<code>hout</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)) as well as cross-validation with different numbers of folds (e.g., <code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) or <code>cv10</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">hout</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">## Predict: test</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">## Stratification: FALSE</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">cv3</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">## Predict: test</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="performing-the-resampling" class="section level2">
<h2 class="hasAnchor">
<a href="#performing-the-resampling" class="anchor"></a>Performing the resampling</h2>
<p>Function <code><a href="../../reference/resample.html">resample()</a></code> evaluates a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) on a given machine learning <code><a href="../../reference/Task.html">Task()</a></code> using the selected resampling strategy (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<p>As a first example, the performance of linear regression (<code><a href="http://www.rdocumentation.org/packages/stats/topics/lm">stats::lm()</a></code>) on the <code>BostonHousing</code> (<code><a href="http://www.rdocumentation.org/packages/mlbench/topics/BostonHousing">mlbench::BostonHousing()</a></code>) data set is calculated using <em>3-fold cross-validation</em>.</p>
<p>Generally, for <em><span class="math inline">\(K\)</span>-fold cross-validation</em> the data set <span class="math inline">\(D\)</span> is partitioned into <span class="math inline">\(K\)</span> subsets of (approximately) equal size. In the <span class="math inline">\(b\)</span>-th of the <span class="math inline">\(K\)</span> iterations, the <span class="math inline">\(b\)</span>-th subset is used for testing, while the union of the remaining parts forms the training set.</p>
<p>As usual, you can either pass a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) object to <code><a href="../../reference/resample.html">resample()</a></code> or, as done here, provide the class name <code>"regr.lm"</code> of the learner. Since no performance measure is specified the default for regression learners (mean squared error, <a href="measures.html" target="_blank">mse</a>) is calculated.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Specify the resampling strategy (3-fold cross-validation)</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co"># Calculate the performance</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">## Measures:             mse</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">## [Resample] iter 1:    21.7733325</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">## [Resample] iter 2:    18.0053219</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">## [Resample] iter 3:    32.1947336</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb4-12" data-line-number="12">## Aggregated Result: mse.test.mean=23.9911293</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb4-14" data-line-number="14"></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">r</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">## Resample Result</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">## Learner: regr.lm</a>
<a class="sourceLine" id="cb4-19" data-line-number="19">## Aggr perf: mse.test.mean=23.9911293</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">## Runtime: 0.0358479</a></code></pre></div>
<p>The result <code>r</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> result. It contains performance results for the learner and some additional information like the runtime, predicted values, and optionally the models fitted in single resampling iterations.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Peak into r</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">names</span>(r)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">##  [1] "learner.id"     "task.id"        "task.desc"      "measures.train"</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">##  [5] "measures.test"  "aggr"           "pred"           "models"        </a>
<a class="sourceLine" id="cb5-5" data-line-number="5">##  [9] "err.msgs"       "err.dumps"      "extract"        "runtime"</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">## mse.test.mean </a>
<a class="sourceLine" id="cb5-9" data-line-number="9">##      23.99113</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">r<span class="op">$</span>measures.test</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">##   iter      mse</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">## 1    1 21.77333</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">## 2    2 18.00532</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">## 3    3 32.19473</a></code></pre></div>
<p><code>r$measures.test</code> gives the performance on each of the 3 test data sets. <code>r$aggr</code> shows the aggregated performance value. Its name <code>"mse.test.mean"</code> indicates the performance measure, <a href="measures.html" target="_blank">mse</a>, and the method, <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), used to aggregate the 3 individual performances. <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) is the default aggregation scheme for most performance measures and, as the name implies, takes the mean over the performances on the test data sets.</p>
<p>Resampling in <code>mlr</code> works the same way for all types of learning problems and learners. Below is a classification example where a classification tree (rpart) (<code><a href="http://www.rdocumentation.org/packages/rpart/topics/rpart">rpart::rpart()</a></code>) is evaluated on the <code>Sonar</code> (<code>mlbench::sonar()</code>) data set by subsampling with 5 iterations.</p>
<p>In each subsampling iteration the data set <span class="math inline">\(D\)</span> is randomly partitioned into a training and a test set according to a given percentage, e.g., 2/3 training and 1/3 test set. If there is just one iteration, the strategy is commonly called <em>holdout</em> or <em>test sample estimation</em>.</p>
<p>You can calculate several measures at once by passing a <code>list</code> of Measures (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>)s to <code><a href="../../reference/resample.html">resample()</a></code>. Below, the error rate (<a href="measures.html" target="_blank">mmce</a>), false positive and false negative rates (<a href="measures.html" target="_blank">fpr</a>, <a href="measures.html" target="_blank">fnr</a>), and the time it takes to train the learner (<a href="measures.html" target="_blank">timetrain</a>) are estimated by <em>subsampling</em> with 5 iterations.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Subsampling with 5 iterations and default split ratio 2/3</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co"># Subsampling with 5 iterations and 4/5 training data</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>, <span class="dt">split =</span> <span class="dv">4</span><span class="op">/</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co"># Classification tree with information splitting criterion</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>))</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co"># Calculate the performance measures</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(lrn, sonar.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain))</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">## Resampling: subsampling</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">## Measures:             mmce        fpr         fnr         timetrain</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">## [Resample] iter 1:    0.2380952   0.2105263   0.2608696   0.0170000</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">## [Resample] iter 2:    0.1666667   0.2631579   0.0869565   0.0140000</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">## [Resample] iter 3:    0.1666667   0.0909091   0.2500000   0.0150000</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">## [Resample] iter 4:    0.1428571   0.2105263   0.0869565   0.0140000</a>
<a class="sourceLine" id="cb6-18" data-line-number="18">## [Resample] iter 5:    0.2142857   0.0526316   0.3478261   0.0160000</a>
<a class="sourceLine" id="cb6-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb6-20" data-line-number="20">## Aggregated Result: mmce.test.mean=0.1857143,fpr.test.mean=0.1655502,fnr.test.mean=0.2065217,timetrain.test.mean=0.0152000</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">## </a>
<a class="sourceLine" id="cb6-22" data-line-number="22"></a>
<a class="sourceLine" id="cb6-23" data-line-number="23">r</a>
<a class="sourceLine" id="cb6-24" data-line-number="24">## Resample Result</a>
<a class="sourceLine" id="cb6-25" data-line-number="25">## Task: Sonar-example</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb6-27" data-line-number="27">## Aggr perf: mmce.test.mean=0.1857143,fpr.test.mean=0.1655502,fnr.test.mean=0.2065217,timetrain.test.mean=0.0152000</a>
<a class="sourceLine" id="cb6-28" data-line-number="28">## Runtime: 0.134764</a></code></pre></div>
<p>If you want to add further measures afterwards, use <code><a href="../../reference/addRRMeasure.html">addRRMeasure()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Add balanced error rate (ber) and time used to predict</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../../reference/addRRMeasure.html">addRRMeasure</a></span>(r, <span class="kw">list</span>(ber, timepredict))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">## Resample Result</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">## Task: Sonar-example</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">## Aggr perf: mmce.test.mean=0.1857143,fpr.test.mean=0.1655502,fnr.test.mean=0.2065217,timetrain.test.mean=0.0152000,ber.test.mean=0.1860360,timepredict.test.mean=0.0040000</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">## Runtime: 0.134764</a></code></pre></div>
<p>By default, <code><a href="../../reference/resample.html">resample()</a></code> prints progress messages and intermediate results. You can turn this off by setting <code>show.info = FALSE</code>, as done in the code chunk below. (If you are interested in suppressing these messages permanently have a look at the tutorial page about <a href="configureMlr.html" target="_blank">configuring mlr</a>.)</p>
<p>In the above example, the Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) was explicitly constructed. For convenience you can also specify the learner as a string and pass any learner parameters via the <code>...</code> argument of <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>), sonar.task, rdesc,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain), <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">## Task: Sonar-example</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">## Aggr perf: mmce.test.mean=0.2571429,fpr.test.mean=0.2897045,fnr.test.mean=0.2138938,timetrain.test.mean=0.0146000</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">## Runtime: 0.12563</a></code></pre></div>
</div>
<div id="accessing-resample-results" class="section level2">
<h2 class="hasAnchor">
<a href="#accessing-resample-results" class="anchor"></a>Accessing resample results</h2>
<p>Apart from the learner performance you can extract further information from the resample results, for example predicted values or the models fitted in individual resample iterations.</p>
<div id="predictions" class="section level3">
<h3 class="hasAnchor">
<a href="#predictions" class="anchor"></a>Predictions</h3>
<p>Per default, the <code><a href="../../reference/resample.html">resample()</a></code> result contains the predictions made during the resampling. If you do not want to keep them, e.g., in order to conserve memory, set <code>keep.pred = FALSE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<p>The predictions are stored in slot <code>$pred</code> of the resampling result, which can also be accessed by function <code><a href="../../reference/getRRPredictions.html">getRRPredictions()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">r<span class="op">$</span>pred</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb9-8" data-line-number="8">## time (mean): 0.00</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">## 1 131     M        M    1 test</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">## 2  98     M        M    1 test</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">## 3  68     R        R    1 test</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">## 4  87     R        M    1 test</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">## 5 124     M        M    1 test</a>
<a class="sourceLine" id="cb9-15" data-line-number="15">## 6 178     M        M    1 test</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">## ... (#rows: 210, #cols: 5)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17"></a>
<a class="sourceLine" id="cb9-18" data-line-number="18">pred =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictions.html">getRRPredictions</a></span>(r)</a>
<a class="sourceLine" id="cb9-19" data-line-number="19">pred</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-22" data-line-number="22">## Predict: test</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-24" data-line-number="24">## predict.type: response</a>
<a class="sourceLine" id="cb9-25" data-line-number="25">## threshold: </a>
<a class="sourceLine" id="cb9-26" data-line-number="26">## time (mean): 0.00</a>
<a class="sourceLine" id="cb9-27" data-line-number="27">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-28" data-line-number="28">## 1 131     M        M    1 test</a>
<a class="sourceLine" id="cb9-29" data-line-number="29">## 2  98     M        M    1 test</a>
<a class="sourceLine" id="cb9-30" data-line-number="30">## 3  68     R        R    1 test</a>
<a class="sourceLine" id="cb9-31" data-line-number="31">## 4  87     R        M    1 test</a>
<a class="sourceLine" id="cb9-32" data-line-number="32">## 5 124     M        M    1 test</a>
<a class="sourceLine" id="cb9-33" data-line-number="33">## 6 178     M        M    1 test</a>
<a class="sourceLine" id="cb9-34" data-line-number="34">## ... (#rows: 210, #cols: 5)</a></code></pre></div>
<p><code>pred</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> Prediction. Just as a <code><a href="../../reference/Prediction.html">Prediction()</a></code> object (see the tutorial page on making <a href="predict.html" target="_blank">predictions</a> it has an element <code>$data</code> which is a <code>data.frame</code> that contains the predictions and in the case of a supervised learning problem the true values of the target variable(s). You can use <code>as.data.frame</code> (<code><a href="../../reference/Prediction.html">Prediction()</a></code> to directly access the <code>$data</code> slot. Moreover, all getter functions for <code><a href="../../reference/Prediction.html">Prediction()</a></code> objects like <code><a href="../../reference/getPredictionResponse.html">getPredictionResponse()</a></code> or <code><a href="../../reference/getPredictionProbabilities.html">getPredictionProbabilities()</a></code> are applicable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">head</span>(<span class="kw">as.data.frame</span>(pred))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">##    id truth response iter  set</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">## 1 131     M        M    1 test</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">## 2  98     M        M    1 test</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">## 3  68     R        R    1 test</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">## 4  87     R        M    1 test</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">## 5 124     M        M    1 test</a>
<a class="sourceLine" id="cb10-8" data-line-number="8">## 6 178     M        M    1 test</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionTruth</a></span>(pred))</a>
<a class="sourceLine" id="cb10-11" data-line-number="11">## [1] M M R R M M</a>
<a class="sourceLine" id="cb10-12" data-line-number="12">## Levels: M R</a>
<a class="sourceLine" id="cb10-13" data-line-number="13"></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionResponse</a></span>(pred))</a>
<a class="sourceLine" id="cb10-15" data-line-number="15">## [1] M M R M M M</a>
<a class="sourceLine" id="cb10-16" data-line-number="16">## Levels: M R</a></code></pre></div>
<p>The columns <code>iter</code> and <code>set</code> in the <code>data.frame</code> indicate the resampling iteration and the data set (<code>train</code> or <code>test</code>) for which the prediction was made.</p>
<p>By default, predictions are made for the test sets only. If predictions for the training set are required, set <code>predict = "train"</code> (for predictions on the train set only) or <code>predict = "both"</code> (for predictions on both train and test sets) in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. In any case, this is necessary for some bootstrap methods (<em>b632</em> and <em>b632+</em>) and some examples are shown later on.</p>
<p>Below, we use simple Holdout, i.e., split the data once into a training and test set, as resampling strategy and make predictions on both sets.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Make predictions on both training and test sets</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb11-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0200000</a>
<a class="sourceLine" id="cb11-10" data-line-number="10">## Runtime: 0.0124731</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"></a>
<a class="sourceLine" id="cb11-12" data-line-number="12">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">##   iter mmce</a>
<a class="sourceLine" id="cb11-14" data-line-number="14">## 1    1 0.02</a></code></pre></div>
<p>(Please note that nonetheless the misclassification rate <code>r$aggr</code> is estimated on the test data only. How to calculate performance measures on the training sets is shown below.)</p>
<p>A second function to extract predictions from resample results is <code><a href="../../reference/getRRPredictionList.html">getRRPredictionList()</a></code> which returns a <code>list</code> of predictions split by data set (train/test) and resampling iteration.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">predList =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictionList.html">getRRPredictionList</a></span>(r)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">predList</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">## $train</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">## $train$`1`</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">## Prediction: 100 observations</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb12-8" data-line-number="8">## time: 0.00</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">##      id      truth   response</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">## 60   60 versicolor versicolor</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">## 7     7     setosa     setosa</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">## 5     5     setosa     setosa</a>
<a class="sourceLine" id="cb12-13" data-line-number="13">## 127 127  virginica  virginica</a>
<a class="sourceLine" id="cb12-14" data-line-number="14">## 19   19     setosa     setosa</a>
<a class="sourceLine" id="cb12-15" data-line-number="15">## 84   84 versicolor  virginica</a>
<a class="sourceLine" id="cb12-16" data-line-number="16">## ... (#rows: 100, #cols: 3)</a>
<a class="sourceLine" id="cb12-17" data-line-number="17">## </a>
<a class="sourceLine" id="cb12-18" data-line-number="18">## </a>
<a class="sourceLine" id="cb12-19" data-line-number="19">## $test</a>
<a class="sourceLine" id="cb12-20" data-line-number="20">## $test$`1`</a>
<a class="sourceLine" id="cb12-21" data-line-number="21">## Prediction: 50 observations</a>
<a class="sourceLine" id="cb12-22" data-line-number="22">## predict.type: response</a>
<a class="sourceLine" id="cb12-23" data-line-number="23">## threshold: </a>
<a class="sourceLine" id="cb12-24" data-line-number="24">## time: 0.00</a>
<a class="sourceLine" id="cb12-25" data-line-number="25">##      id      truth   response</a>
<a class="sourceLine" id="cb12-26" data-line-number="26">## 148 148  virginica  virginica</a>
<a class="sourceLine" id="cb12-27" data-line-number="27">## 65   65 versicolor versicolor</a>
<a class="sourceLine" id="cb12-28" data-line-number="28">## 46   46     setosa     setosa</a>
<a class="sourceLine" id="cb12-29" data-line-number="29">## 141 141  virginica  virginica</a>
<a class="sourceLine" id="cb12-30" data-line-number="30">## 91   91 versicolor versicolor</a>
<a class="sourceLine" id="cb12-31" data-line-number="31">## 80   80 versicolor versicolor</a>
<a class="sourceLine" id="cb12-32" data-line-number="32">## ... (#rows: 50, #cols: 3)</a></code></pre></div>
</div>
<div id="learner-models" class="section level3">
<h3 class="hasAnchor">
<a href="#learner-models" class="anchor"></a>Learner models</h3>
<p>In each resampling iteration a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) is fitted on the respective training set. By default, the resulting <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>)s are not included in the <code><a href="../../reference/resample.html">resample()</a></code> result and slot <code>$models</code> is empty. In order to keep them, set <code>models = TRUE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>, as in the following survival analysis example.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"surv.coxph"</span>, lung.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">models =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">r<span class="op">$</span>models</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">## [[1]]</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb13-11" data-line-number="11">## [[2]]</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">## Trained on: task.id = lung-example; obs = 112; features = 8</a>
<a class="sourceLine" id="cb13-14" data-line-number="14">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-15" data-line-number="15">## </a>
<a class="sourceLine" id="cb13-16" data-line-number="16">## [[3]]</a>
<a class="sourceLine" id="cb13-17" data-line-number="17">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-18" data-line-number="18">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-19" data-line-number="19">## Hyperparameters:</a></code></pre></div>
</div>
<div id="the-extract-option" class="section level3">
<h3 class="hasAnchor">
<a href="#the-extract-option" class="anchor"></a>The extract option</h3>
<p>Keeping complete fitted models can be memory-intensive if these objects are large or the number of resampling iterations is high. Alternatively, you can use the <code>extract</code> argument of <code><a href="../../reference/resample.html">resample()</a></code> to retain only the information you need. To this end you need to pass a function to <code>extract</code> which is applied to each <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>) object fitted in each resampling iteration.</p>
<p>Below, we cluster the <code><a href="http://www.rdocumentation.org/packages/datasets/topics/mtcars">datasets::mtcars()</a></code> data using the <span class="math inline">\(k\)</span>-means algorithm with <span class="math inline">\(k = 3\)</span> and keep only the cluster centers.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># Extract the compute cluster centers</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"cluster.kmeans"</span>, mtcars.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  <span class="dt">centers =</span> <span class="dv">3</span>, <span class="dt">extract =</span> <span class="cf">function</span>(x) <span class="kw"><a href="../../reference/getLearnerModel.html">getLearnerModel</a></span>(x)<span class="op">$</span>centers)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">## Warning in rgl.init(initValue, onlyNULL): RGL: unable to open X11 display</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">## Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb14-10" data-line-number="10">## This is package 'modeest' written by P. PONCET.</a>
<a class="sourceLine" id="cb14-11" data-line-number="11">## For a complete list of functions, use 'library(help = "modeest")' or 'help.start()'.</a>
<a class="sourceLine" id="cb14-12" data-line-number="12">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">## [[1]]</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">##        mpg      cyl     disp       hp     drat    wt     qsec        vs</a>
<a class="sourceLine" id="cb14-15" data-line-number="15">## 1 16.56667 7.333333 258.8667 155.0000 2.966667 3.770 18.54000 0.3333333</a>
<a class="sourceLine" id="cb14-16" data-line-number="16">## 2 23.46364 4.545455 127.4727  94.0000 3.976364 2.665 19.02545 0.8181818</a>
<a class="sourceLine" id="cb14-17" data-line-number="17">## 3 14.78571 8.000000 406.1429 215.5714 3.260000 4.292 16.80429 0.0000000</a>
<a class="sourceLine" id="cb14-18" data-line-number="18">##          am     gear     carb</a>
<a class="sourceLine" id="cb14-19" data-line-number="19">## 1 0.0000000 3.000000 2.333333</a>
<a class="sourceLine" id="cb14-20" data-line-number="20">## 2 0.5454545 4.000000 2.181818</a>
<a class="sourceLine" id="cb14-21" data-line-number="21">## 3 0.1428571 3.285714 3.428571</a>
<a class="sourceLine" id="cb14-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb14-23" data-line-number="23">## [[2]]</a>
<a class="sourceLine" id="cb14-24" data-line-number="24">##        mpg      cyl     disp       hp     drat       wt     qsec        vs</a>
<a class="sourceLine" id="cb14-25" data-line-number="25">## 1 15.85714 8.000000 366.0000 238.4286 3.451429 3.825714 15.97714 0.0000000</a>
<a class="sourceLine" id="cb14-26" data-line-number="26">## 2 24.48889 4.666667 123.3222 100.7778 3.968889 2.538667 18.25778 0.7777778</a>
<a class="sourceLine" id="cb14-27" data-line-number="27">## 3 17.11667 7.333333 276.1000 145.8333 2.981667 3.523333 18.23833 0.3333333</a>
<a class="sourceLine" id="cb14-28" data-line-number="28">##          am     gear     carb</a>
<a class="sourceLine" id="cb14-29" data-line-number="29">## 1 0.2857143 3.571429 4.000000</a>
<a class="sourceLine" id="cb14-30" data-line-number="30">## 2 0.6666667 4.111111 2.666667</a>
<a class="sourceLine" id="cb14-31" data-line-number="31">## 3 0.0000000 3.000000 2.000000</a>
<a class="sourceLine" id="cb14-32" data-line-number="32">## </a>
<a class="sourceLine" id="cb14-33" data-line-number="33">## [[3]]</a>
<a class="sourceLine" id="cb14-34" data-line-number="34">##        mpg      cyl    disp    hp     drat       wt     qsec        vs</a>
<a class="sourceLine" id="cb14-35" data-line-number="35">## 1 29.02857 4.000000  89.700  78.0 4.194286 1.936857 18.42857 0.8571429</a>
<a class="sourceLine" id="cb14-36" data-line-number="36">## 2 20.61667 5.666667 171.900 120.5 3.723333 3.011667 18.37000 0.5000000</a>
<a class="sourceLine" id="cb14-37" data-line-number="37">## 3 14.18750 8.000000 344.575 207.5 3.156250 4.104875 16.87250 0.0000000</a>
<a class="sourceLine" id="cb14-38" data-line-number="38">##      am     gear     carb</a>
<a class="sourceLine" id="cb14-39" data-line-number="39">## 1 1.000 4.285714 1.428571</a>
<a class="sourceLine" id="cb14-40" data-line-number="40">## 2 0.500 4.000000 3.500000</a>
<a class="sourceLine" id="cb14-41" data-line-number="41">## 3 0.125 3.250000 3.750000</a></code></pre></div>
<p>As a second example, we extract the variable importances from fitted regression trees using function <code><a href="../../reference/getFeatureImportance.html">getFeatureImportance()</a></code>. (For more detailed information on this topic see the <a href="feature_selection.html" target="_blank">feature selection</a> page.)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Extract the variable importance in a regression tree</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">extract =</span> getFeatureImportance)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">## [[1]]</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb15-8" data-line-number="8">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">## Measure: NA</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">## Contrast: NA</a>
<a class="sourceLine" id="cb15-11" data-line-number="11">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">## Replace: NA</a>
<a class="sourceLine" id="cb15-13" data-line-number="13">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-14" data-line-number="14">## Local: FALSE</a>
<a class="sourceLine" id="cb15-15" data-line-number="15">##       crim       zn    indus chas      nox       rm     age    dis     rad</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">## 1 2190.504 2095.669 4179.768    0 2965.864 14273.15 3037.17 2892.6 749.834</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">##        tax  ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-18" data-line-number="18">## 1 3006.307 2564.371 374.9616 11695.69</a>
<a class="sourceLine" id="cb15-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb15-20" data-line-number="20">## [[2]]</a>
<a class="sourceLine" id="cb15-21" data-line-number="21">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-22" data-line-number="22">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-23" data-line-number="23">## </a>
<a class="sourceLine" id="cb15-24" data-line-number="24">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-25" data-line-number="25">## Measure: NA</a>
<a class="sourceLine" id="cb15-26" data-line-number="26">## Contrast: NA</a>
<a class="sourceLine" id="cb15-27" data-line-number="27">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-28" data-line-number="28">## Replace: NA</a>
<a class="sourceLine" id="cb15-29" data-line-number="29">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-30" data-line-number="30">## Local: FALSE</a>
<a class="sourceLine" id="cb15-31" data-line-number="31">##       crim       zn    indus     chas      nox       rm      age      dis</a>
<a class="sourceLine" id="cb15-32" data-line-number="32">## 1 567.3985 717.2088 5477.014 196.8837 2655.045 16947.38 2502.773 2760.652</a>
<a class="sourceLine" id="cb15-33" data-line-number="33">##   rad      tax  ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-34" data-line-number="34">## 1   0 2758.063 3096.382 196.8837 11413.53</a>
<a class="sourceLine" id="cb15-35" data-line-number="35">## </a>
<a class="sourceLine" id="cb15-36" data-line-number="36">## [[3]]</a>
<a class="sourceLine" id="cb15-37" data-line-number="37">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-38" data-line-number="38">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-39" data-line-number="39">## </a>
<a class="sourceLine" id="cb15-40" data-line-number="40">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-41" data-line-number="41">## Measure: NA</a>
<a class="sourceLine" id="cb15-42" data-line-number="42">## Contrast: NA</a>
<a class="sourceLine" id="cb15-43" data-line-number="43">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-44" data-line-number="44">## Replace: NA</a>
<a class="sourceLine" id="cb15-45" data-line-number="45">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-46" data-line-number="46">## Local: FALSE</a>
<a class="sourceLine" id="cb15-47" data-line-number="47">##       crim       zn   indus chas      nox       rm      age     dis</a>
<a class="sourceLine" id="cb15-48" data-line-number="48">## 1 3336.316 6165.047 9273.75    0 8919.878 13156.89 7380.759 2823.36</a>
<a class="sourceLine" id="cb15-49" data-line-number="49">##        rad      tax  ptratio b    lstat</a>
<a class="sourceLine" id="cb15-50" data-line-number="50">## 1 2092.961 1195.186 946.6051 0 17065.21</a></code></pre></div>
<p>There is also an convenience function <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices()</a></code> to extract the resampling indices from the <code>ResampleResult</code> object:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(r)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">## $train.inds</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">## $train.inds[[1]]</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">##   [1] 369 364 194 267  52 315 432 163 327 388 462  73 493 304  15 379 440</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">##  [18] 377  91 133 490 277 223   5 348 498 178  70 307 112 128 177 356 225</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">##  [35] 334 368 443 103 301  88 460 448 237 322  41 438 115 296 343 224 139</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">##  [52] 345  53 378 419 385  87 266 406   9 503 466 475 458 284 199 465 363</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">##  [69] 222 453 126 311 353 398  13 367 232  55 209  57 183 169 297 409 344</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">##  [86] 154 131 185 308 280 386 239 428 491  92 132 265 405 293 483  76 108</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">## [103] 485 289 342 168 412 303 116 482  83  49 336 425 274 430 191 250  31</a>
<a class="sourceLine" id="cb16-11" data-line-number="11">## [120] 359  71 488 188 445 227 278 427 202  27 463 387 242 324 451 496  25</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">## [137] 391 159 208 381  97 220 155 423  45 184 300 147 433 376 328  86   1</a>
<a class="sourceLine" id="cb16-13" data-line-number="13">## [154] 434 302 173 468 310 395  47 401 399 271  78 330  16 216  32  42  24</a>
<a class="sourceLine" id="cb16-14" data-line-number="14">## [171] 472 104 165 411 314 446 473 187   7 186  35 135  11 200 418 233 258</a>
<a class="sourceLine" id="cb16-15" data-line-number="15">## [188]  14 238  38 145  26  34 248  80 374 124 403  77 167  22 366 352 404</a>
<a class="sourceLine" id="cb16-16" data-line-number="16">## [205] 236  64 298 452  12 130 306 408 413 109 299  43 414 424 252 249 497</a>
<a class="sourceLine" id="cb16-17" data-line-number="17">## [222] 174 416 134 505 441 210 341 380 205 162 467 166  79 240 241 244  59</a>
<a class="sourceLine" id="cb16-18" data-line-number="18">## [239] 152 390 213 176  90 172 272 436  85 429 279  93 426 287 118   8 357</a>
<a class="sourceLine" id="cb16-19" data-line-number="19">## [256]  84 500 221 247 195 494 246 480  10   2 471 161  75 270 264 444 127</a>
<a class="sourceLine" id="cb16-20" data-line-number="20">## [273] 318 339 501 206 431  62 215 474 102  65  40  39 256  46  23 182 140</a>
<a class="sourceLine" id="cb16-21" data-line-number="21">## [290]  66 160 146 389 351 181 257 317  95  68 320  20 229 137 201 325 276</a>
<a class="sourceLine" id="cb16-22" data-line-number="22">## [307] 321 114 402 121 457 113 110 269  63  56 421 136 150 204 420 245 291</a>
<a class="sourceLine" id="cb16-23" data-line-number="23">## [324] 268 360 407 106 332 450  98 371 255 397 502 295 347 373</a>
<a class="sourceLine" id="cb16-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb16-25" data-line-number="25">## $train.inds[[2]]</a>
<a class="sourceLine" id="cb16-26" data-line-number="26">##   [1] 369 267  52  81 235 327 439 388 470  33  37 305 175 309 273 495  99</a>
<a class="sourceLine" id="cb16-27" data-line-number="27">##  [18] 394 410 275  15  17 469 148 440 189 481 490 454 211   5 459 348 498</a>
<a class="sourceLine" id="cb16-28" data-line-number="28">##  [35] 178 349  48 219 337 323 112 177 119 354 506 231  60 326 225 447 334</a>
<a class="sourceLine" id="cb16-29" data-line-number="29">##  [52] 368 443 170 103 207 460 288  89 448 111 322 251  41 115 296 422 224</a>
<a class="sourceLine" id="cb16-30" data-line-number="30">##  [69] 139 345  53 234 419 489  19 266 406  51 503 466 214 458 158 199 400</a>
<a class="sourceLine" id="cb16-31" data-line-number="31">##  [86] 465 363 222 453 353 398 254 370 153 203 382  13 217 226 232  55  57</a>
<a class="sourceLine" id="cb16-32" data-line-number="32">## [103] 183 179 449 290 409 344 154 365 131 185 308 280 239 491 265 156  58</a>
<a class="sourceLine" id="cb16-33" data-line-number="33">## [120]  29  76 485  28 479 412 120 116 482 478 425  50 285 274 358 171 442</a>
<a class="sourceLine" id="cb16-34" data-line-number="34">## [137]  94 250 486 331 164 227 278 477 192 149 242  54 487 324 230  96 159</a>
<a class="sourceLine" id="cb16-35" data-line-number="35">## [154] 484 122 423  45 184 147 415 433 456   3  86 302 340 129  61 173  30</a>
<a class="sourceLine" id="cb16-36" data-line-number="36">## [171] 346 395  47 401  82 261 271 455 417 330  16 105 313  18  32 107 253</a>
<a class="sourceLine" id="cb16-37" data-line-number="37">## [188] 190 104 165 411 243 446   4 362   7  44 418 258  14 180 117 238  38</a>
<a class="sourceLine" id="cb16-38" data-line-number="38">## [205] 145  26 335 248 492 374  77 167 143  64 151 452 130 282 408 437 361</a>
<a class="sourceLine" id="cb16-39" data-line-number="39">## [222] 413 393 312 424 252 338 193 249 497 174 134 125 505 210 341 380 205</a>
<a class="sourceLine" id="cb16-40" data-line-number="40">## [239] 504 467 166 240  69 241 244  36 213 197  85 429 198 138 142 383 355</a>
<a class="sourceLine" id="cb16-41" data-line-number="41">## [256] 279 499 476 286 118 357 157  84 500 221 195 494 161  75 329 444 127</a>
<a class="sourceLine" id="cb16-42" data-line-number="42">## [273] 318 339 292 392 196  62 144 215 263 372 102  67 464  65  40  39 294</a>
<a class="sourceLine" id="cb16-43" data-line-number="43">## [290] 123  72 259 140 319 375  66 160 316 389 351 181  74  95 212  68 260</a>
<a class="sourceLine" id="cb16-44" data-line-number="44">## [307]  20 229 100 141 201 218 325 435 276 384 396 457 269 350 281  63 262</a>
<a class="sourceLine" id="cb16-45" data-line-number="45">## [324] 421 228   6 420 461 333 291 268 360 106  98 101 283  21 347</a>
<a class="sourceLine" id="cb16-46" data-line-number="46">## </a>
<a class="sourceLine" id="cb16-47" data-line-number="47">## $train.inds[[3]]</a>
<a class="sourceLine" id="cb16-48" data-line-number="48">##   [1] 364 194 315  81 432 163 235 439 470  33  37 305 462 175 309 273 495</a>
<a class="sourceLine" id="cb16-49" data-line-number="49">##  [18]  99  73 493 394 410 275 304 379  17 469 148 377  91 189 133 481 454</a>
<a class="sourceLine" id="cb16-50" data-line-number="50">##  [35] 211 277 223 459 349  70 307  48 219 337 323 128 119 354 506 356 231</a>
<a class="sourceLine" id="cb16-51" data-line-number="51">##  [52]  60 326 447 170 207 301  88 288  89 111 237 251 438 422 343 234 378</a>
<a class="sourceLine" id="cb16-52" data-line-number="52">##  [69] 489 385  19  87   9  51 475 214 284 158 400 126 311 254 370 153 203</a>
<a class="sourceLine" id="cb16-53" data-line-number="53">##  [86] 382 217 367 226 209 169 179 297 449 290 365 386 428  92 132 405 156</a>
<a class="sourceLine" id="cb16-54" data-line-number="54">## [103] 293  58 483  29 108 289  28 479 342 168 303 120  83  49 478 336  50</a>
<a class="sourceLine" id="cb16-55" data-line-number="55">## [120] 285 358 171 442 430 191  94  31 359 486  71 331 488 188 164 445 477</a>
<a class="sourceLine" id="cb16-56" data-line-number="56">## [137] 192 427 149 202  27 463 387  54 487 451 496  25 230  96 391 484 208</a>
<a class="sourceLine" id="cb16-57" data-line-number="57">## [154] 381  97 220 155 122 300 415 376 456 328   3   1 434 340 129  61 468</a>
<a class="sourceLine" id="cb16-58" data-line-number="58">## [171]  30 346 310  82 261 399 455  78 417 105 313 216  18  42 107 253 190</a>
<a class="sourceLine" id="cb16-59" data-line-number="59">## [188]  24 472 314 243 473   4 187 362 186  35 135  11 200  44 233 180 117</a>
<a class="sourceLine" id="cb16-60" data-line-number="60">## [205] 335  34 492  80 124 403  22 366 352 404 143 236 298 151  12 306 282</a>
<a class="sourceLine" id="cb16-61" data-line-number="61">## [222] 437 361 109 393 299 312  43 414 338 193 416 125 441 162 504  79  69</a>
<a class="sourceLine" id="cb16-62" data-line-number="62">## [239]  36  59 152 390 176  90 197 172 272 436 198 138 142 383 355 499 476</a>
<a class="sourceLine" id="cb16-63" data-line-number="63">## [256]  93 426 286 287   8 157 247 246 480  10   2 471 270 329 264 501 206</a>
<a class="sourceLine" id="cb16-64" data-line-number="64">## [273] 292 392 196 431 144 474 263 372  67 464 294 123 256  46  23  72 182</a>
<a class="sourceLine" id="cb16-65" data-line-number="65">## [290] 259 319 375 146 316 257  74 317 212 320 260 100 137 141 218 435 384</a>
<a class="sourceLine" id="cb16-66" data-line-number="66">## [307] 321 396 114 402 121 113 110 350 281 262  56 136 150 228   6 204 461</a>
<a class="sourceLine" id="cb16-67" data-line-number="67">## [324] 245 333 407 332 450 371 255 397 502 101 283  21 295 373</a>
<a class="sourceLine" id="cb16-68" data-line-number="68">## </a>
<a class="sourceLine" id="cb16-69" data-line-number="69">## </a>
<a class="sourceLine" id="cb16-70" data-line-number="70">## $test.inds</a>
<a class="sourceLine" id="cb16-71" data-line-number="71">## $test.inds[[1]]</a>
<a class="sourceLine" id="cb16-72" data-line-number="72">##   [1]   3   4   6  17  18  19  21  28  29  30  33  36  37  44  48  50  51</a>
<a class="sourceLine" id="cb16-73" data-line-number="73">##  [18]  54  58  60  61  67  69  72  74  81  82  89  94  96  99 100 101 105</a>
<a class="sourceLine" id="cb16-74" data-line-number="74">##  [35] 107 111 117 119 120 122 123 125 129 138 141 142 143 144 148 149 151</a>
<a class="sourceLine" id="cb16-75" data-line-number="75">##  [52] 153 156 157 158 164 170 171 175 179 180 189 190 192 193 196 197 198</a>
<a class="sourceLine" id="cb16-76" data-line-number="76">##  [69] 203 207 211 212 214 217 218 219 226 228 230 231 234 235 243 251 253</a>
<a class="sourceLine" id="cb16-77" data-line-number="77">##  [86] 254 259 260 261 262 263 273 275 281 282 283 285 286 288 290 292 294</a>
<a class="sourceLine" id="cb16-78" data-line-number="78">## [103] 305 309 312 313 316 319 323 326 329 331 333 335 337 338 340 346 349</a>
<a class="sourceLine" id="cb16-79" data-line-number="79">## [120] 350 354 355 358 361 362 365 370 372 375 382 383 384 392 393 394 396</a>
<a class="sourceLine" id="cb16-80" data-line-number="80">## [137] 400 410 415 417 422 435 437 439 442 447 449 454 455 456 459 461 464</a>
<a class="sourceLine" id="cb16-81" data-line-number="81">## [154] 469 470 476 477 478 479 481 484 486 487 489 492 495 499 504 506</a>
<a class="sourceLine" id="cb16-82" data-line-number="82">## </a>
<a class="sourceLine" id="cb16-83" data-line-number="83">## $test.inds[[2]]</a>
<a class="sourceLine" id="cb16-84" data-line-number="84">##   [1]   1   2   8   9  10  11  12  22  23  24  25  27  31  34  35  42  43</a>
<a class="sourceLine" id="cb16-85" data-line-number="85">##  [18]  46  49  56  59  70  71  73  78  79  80  83  87  88  90  91  92  93</a>
<a class="sourceLine" id="cb16-86" data-line-number="86">##  [35]  97 108 109 110 113 114 121 124 126 128 132 133 135 136 137 146 150</a>
<a class="sourceLine" id="cb16-87" data-line-number="87">##  [52] 152 155 162 163 168 169 172 176 182 186 187 188 191 194 200 202 204</a>
<a class="sourceLine" id="cb16-88" data-line-number="88">##  [69] 206 208 209 216 220 223 233 236 237 245 246 247 255 256 257 264 270</a>
<a class="sourceLine" id="cb16-89" data-line-number="89">##  [86] 272 277 284 287 289 293 295 297 298 299 300 301 303 304 306 307 310</a>
<a class="sourceLine" id="cb16-90" data-line-number="90">## [103] 311 314 315 317 320 321 328 332 336 342 343 352 356 359 364 366 367</a>
<a class="sourceLine" id="cb16-91" data-line-number="91">## [120] 371 373 376 377 378 379 381 385 386 387 390 391 397 399 402 403 404</a>
<a class="sourceLine" id="cb16-92" data-line-number="92">## [137] 405 407 414 416 426 427 428 430 431 432 434 436 438 441 445 450 451</a>
<a class="sourceLine" id="cb16-93" data-line-number="93">## [154] 462 463 468 471 472 473 474 475 480 483 488 493 496 501 502</a>
<a class="sourceLine" id="cb16-94" data-line-number="94">## </a>
<a class="sourceLine" id="cb16-95" data-line-number="95">## $test.inds[[3]]</a>
<a class="sourceLine" id="cb16-96" data-line-number="96">##   [1]   5   7  13  14  15  16  20  26  32  38  39  40  41  45  47  52  53</a>
<a class="sourceLine" id="cb16-97" data-line-number="97">##  [18]  55  57  62  63  64  65  66  68  75  76  77  84  85  86  95  98 102</a>
<a class="sourceLine" id="cb16-98" data-line-number="98">##  [35] 103 104 106 112 115 116 118 127 130 131 134 139 140 145 147 154 159</a>
<a class="sourceLine" id="cb16-99" data-line-number="99">##  [52] 160 161 165 166 167 173 174 177 178 181 183 184 185 195 199 201 205</a>
<a class="sourceLine" id="cb16-100" data-line-number="100">##  [69] 210 213 215 221 222 224 225 227 229 232 238 239 240 241 242 244 248</a>
<a class="sourceLine" id="cb16-101" data-line-number="101">##  [86] 249 250 252 258 265 266 267 268 269 271 274 276 278 279 280 291 296</a>
<a class="sourceLine" id="cb16-102" data-line-number="102">## [103] 302 308 318 322 324 325 327 330 334 339 341 344 345 347 348 351 353</a>
<a class="sourceLine" id="cb16-103" data-line-number="103">## [120] 357 360 363 368 369 374 380 388 389 395 398 401 406 408 409 411 412</a>
<a class="sourceLine" id="cb16-104" data-line-number="104">## [137] 413 418 419 420 421 423 424 425 429 433 440 443 444 446 448 452 453</a>
<a class="sourceLine" id="cb16-105" data-line-number="105">## [154] 457 458 460 465 466 467 482 485 490 491 494 497 498 500 503 505</a></code></pre></div>
</div>
</div>
<div id="stratification-blocking-and-grouping" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-blocking-and-grouping" class="anchor"></a>Stratification, Blocking and Grouping</h2>
<ul>
<li><p><em>Stratification</em> with respect to a categorical variable makes sure that all its values are present in each training and test set in approximately the same proportion as in the original data set. Stratification is possible with regard to categorical target variables (and thus for supervised classification and survival analysis) or categorical explanatory variables.</p></li>
<li><p><em>Blocking</em> refers to the situation that subsets of observations belong together and must not be separated during resampling. Hence, for one train/test set pair the entire block is either in the training set or in the test set.</p></li>
<li><p><em>Grouping</em> means that the folds are composed out of a factor vector given by the user. In this setting no repetitions are possible as all folds are predefined. The approach can also be used in a nested resampling setting. Note the subtle but important difference to “Blocking”: In “Blocking” factor levels are respected when splitting into train and test (e.g. the test set could be composed out of two given factor levels) whereas in “Grouping” the folds will strictly follow the factor level grouping (meaning that the test set will always only consist of one factor level).</p></li>
</ul>
<div id="stratification-with-respect-to-the-target-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#stratification-with-respect-to-the-target-variables" class="anchor"></a>Stratification with respect to the target variable(s)</h3>
<p>For classification, it is usually desirable to have the same proportion of the classes in all of the partitions of the original data set. This is particularly useful in the case of imbalanced classes and small data sets. Otherwise, it may happen that observations of less frequent classes are missing in some of the training sets which can decrease the performance of the learner, or lead to model crashes. In order to conduct stratified resampling, set <code>stratify = TRUE</code> in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"></a>
<a class="sourceLine" id="cb17-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0266720</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">## Runtime: 0.211886</a></code></pre></div>
<p>Stratification is also available for survival tasks. Here the stratification balances the censoring rate.</p>
</div>
<div id="stratification-with-respect-to-explanatory-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#stratification-with-respect-to-explanatory-variables" class="anchor"></a>Stratification with respect to explanatory variables</h3>
<p>Sometimes it is required to also stratify on the input data, e.g., to ensure that all subgroups are represented in all training and test sets. To stratify on the input columns, specify <code>factor</code> columns of your task data via <code>stratify.cols</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">## Aggr perf: mse.test.mean=23.0163266</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">## Runtime: 0.0292697</a></code></pre></div>
</div>
<div id="blocking-cv-with-flexible-predefined-indices" class="section level3">
<h3 class="hasAnchor">
<a href="#blocking-cv-with-flexible-predefined-indices" class="anchor"></a>Blocking: CV with flexible predefined indices</h3>
<p>If some observations “belong together” and must not be separated when splitting the data into training and test sets for resampling, you can supply this information via a <code>blocking</code> factor when creating the <a href="task.html" target="_blank">task</a>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># 5 blocks containing 30 observations each</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">task =<span class="st"> </span><span class="kw"><a href="../../reference/Task.html">makeClassifTask</a></span>(<span class="dt">data =</span> iris, <span class="dt">target =</span> <span class="st">"Species"</span>, <span class="dt">blocking =</span> <span class="kw">factor</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">each =</span> <span class="dv">30</span>)))</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">task</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">## Supervised task: iris</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">## Type: classif</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">## Target: Species</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">## Observations: 150</a>
<a class="sourceLine" id="cb19-8" data-line-number="8">## Features:</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">##    numerics     factors     ordered functionals </a>
<a class="sourceLine" id="cb19-10" data-line-number="10">##           4           0           0           0 </a>
<a class="sourceLine" id="cb19-11" data-line-number="11">## Missings: FALSE</a>
<a class="sourceLine" id="cb19-12" data-line-number="12">## Has weights: FALSE</a>
<a class="sourceLine" id="cb19-13" data-line-number="13">## Has blocking: TRUE</a>
<a class="sourceLine" id="cb19-14" data-line-number="14">## Has coordinates: FALSE</a>
<a class="sourceLine" id="cb19-15" data-line-number="15">## Classes: 3</a>
<a class="sourceLine" id="cb19-16" data-line-number="16">##     setosa versicolor  virginica </a>
<a class="sourceLine" id="cb19-17" data-line-number="17">##         50         50         50 </a>
<a class="sourceLine" id="cb19-18" data-line-number="18">## Positive class: NA</a></code></pre></div>
<p>When performing a simple “CV” resampling and inspecting the result, we see that the training indices in fold 1 correspond to the specified grouping set in <code>blocking</code> in the task. To initiate this method, we need to set <code>blocking.cv = TRUE</code> when creating the resample description object.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">blocking.cv =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, task, rdesc)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">## Measures:             mmce</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">## [Resample] iter 1:    0.0000000</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">## [Resample] iter 2:    0.0500000</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">## [Resample] iter 3:    0.1000000</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">## </a>
<a class="sourceLine" id="cb20-9" data-line-number="9">## Aggregated Result: mmce.test.mean=0.0500000</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb20-11" data-line-number="11"></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="kw">sort</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb20-13" data-line-number="13">##  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17</a>
<a class="sourceLine" id="cb20-14" data-line-number="14">## [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  61  62  63  64</a>
<a class="sourceLine" id="cb20-15" data-line-number="15">## [35]  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81</a>
<a class="sourceLine" id="cb20-16" data-line-number="16">## [52]  82  83  84  85  86  87  88  89  90 121 122 123 124 125 126 127 128</a>
<a class="sourceLine" id="cb20-17" data-line-number="17">## [69] 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145</a>
<a class="sourceLine" id="cb20-18" data-line-number="18">## [86] 146 147 148 149 150</a></code></pre></div>
<p>However, please note the effects of this method: The created folds will not have the same size! Here, Fold 1 has a 120/30 split while the other two folds have a 90/60 split.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">lapply</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds, <span class="cf">function</span>(x) <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">## [[1]]</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">## [1] 90</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb21-5" data-line-number="5">## [[2]]</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">## [1] 90</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb21-8" data-line-number="8">## [[3]]</a>
<a class="sourceLine" id="cb21-9" data-line-number="9">## [1] 120</a></code></pre></div>
<p>This is caused by the fact that we supplied five groups that must belong together but only used a three fold resampling strategy here.</p>
</div>
<div id="grouping-cv-with-fixed-predefined-indices" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-cv-with-fixed-predefined-indices" class="anchor"></a>Grouping: CV with fixed predefined indices</h3>
<p>There is a second way of using predefined indices in resampling in <code>mlr</code>: Constructing the folds based on the supplied indices in <code>blocking</code>. We refer to this method here as “grouping” to distinguish it from “blocking”. This method is more restrictive in the way that it will always use the number of levels supplied via <code>blocking</code> as the number of folds. To use this method, we need to set <code>fixed = TRUE</code> instead of <code>blocking.cv</code> when creating the resampling description object.</p>
<p>We can leave out the <code>iters</code> argument, as it will be set internally to the number of supplied factor levels.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, task, rdesc)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">## Warning in instantiateResampleInstance.CVDesc(desc, size, task): Adjusting</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">## levels to match number of blocking levels.</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">## Measures:             mmce</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">## [Resample] iter 1:    0.0000000</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">## [Resample] iter 2:    0.1000000</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">## [Resample] iter 3:    0.1000000</a>
<a class="sourceLine" id="cb22-10" data-line-number="10">## [Resample] iter 4:    0.0000000</a>
<a class="sourceLine" id="cb22-11" data-line-number="11">## [Resample] iter 5:    0.0000000</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">## </a>
<a class="sourceLine" id="cb22-13" data-line-number="13">## Aggregated Result: mmce.test.mean=0.0400000</a>
<a class="sourceLine" id="cb22-14" data-line-number="14">## </a>
<a class="sourceLine" id="cb22-15" data-line-number="15"><span class="kw">sort</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb22-16" data-line-number="16">##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17</a>
<a class="sourceLine" id="cb22-17" data-line-number="17">##  [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34</a>
<a class="sourceLine" id="cb22-18" data-line-number="18">##  [35]  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51</a>
<a class="sourceLine" id="cb22-19" data-line-number="19">##  [52]  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68</a>
<a class="sourceLine" id="cb22-20" data-line-number="20">##  [69]  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85</a>
<a class="sourceLine" id="cb22-21" data-line-number="21">##  [86]  86  87  88  89  90 121 122 123 124 125 126 127 128 129 130 131 132</a>
<a class="sourceLine" id="cb22-22" data-line-number="22">## [103] 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149</a>
<a class="sourceLine" id="cb22-23" data-line-number="23">## [120] 150</a></code></pre></div>
<p>You can see that we automatically created five folds in which the test set always corresponds to one factor level.</p>
<p>Doing it this way also means that we cannot do repeated CV because there is no way to create multiple shuffled folds of this fixed arrangement.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">lapply</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds, <span class="cf">function</span>(x) <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">## [[1]]</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">## [1] 120</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb23-5" data-line-number="5">## [[2]]</a>
<a class="sourceLine" id="cb23-6" data-line-number="6">## [1] 120</a>
<a class="sourceLine" id="cb23-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb23-8" data-line-number="8">## [[3]]</a>
<a class="sourceLine" id="cb23-9" data-line-number="9">## [1] 120</a>
<a class="sourceLine" id="cb23-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb23-11" data-line-number="11">## [[4]]</a>
<a class="sourceLine" id="cb23-12" data-line-number="12">## [1] 120</a>
<a class="sourceLine" id="cb23-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb23-14" data-line-number="14">## [[5]]</a>
<a class="sourceLine" id="cb23-15" data-line-number="15">## [1] 120</a></code></pre></div>
<p>However, this method can also be used in nested resampling settings (e.g. in hyperparameter tuning). In the inner level, the factor levels are honored and the function simply creates one fold less than in the outer level.</p>
<p>Please note that the <code>iters</code> argument has no effect in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> if <code>fixed = TRUE</code>. The number of folds will be automatically set based on the supplied number of factor levels via <code>blocking</code>. In the inner level, the number of folds will simply be one less than in the outer level.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># test fixed in nested resampling</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.lda"</span>)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">ctrl &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span>(<span class="dt">maxit =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4">ps &lt;-<span class="st"> </span><span class="kw">makeParamSet</span>(<span class="kw">makeNumericParam</span>(<span class="st">"nu"</span>, <span class="dt">lower =</span> <span class="dv">2</span>, <span class="dt">upper =</span> <span class="dv">20</span>))</a>
<a class="sourceLine" id="cb24-5" data-line-number="5">inner =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb24-6" data-line-number="6">outer =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb24-7" data-line-number="7">tune_wrapper =<span class="st"> </span><span class="kw"><a href="../../reference/makeTuneWrapper.html">makeTuneWrapper</a></span>(lrn, <span class="dt">resampling =</span> inner, <span class="dt">par.set =</span> ps,</a>
<a class="sourceLine" id="cb24-8" data-line-number="8">  <span class="dt">control =</span> ctrl, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb24-9" data-line-number="9"></a>
<a class="sourceLine" id="cb24-10" data-line-number="10">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(tune_wrapper, task, outer, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb24-11" data-line-number="11">  <span class="dt">extract =</span> getTuneResult)</a></code></pre></div>
<p>To check on the inner resampling indices, you can call <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices(inner = TRUE)</a></code>. You can see that for every outer fold (List of 5), four inner folds were created that respect the grouping supplied via the <code>blocking</code> argument.</p>
<p>Of course you can also use a normal random sampling “CV” description in the inner level by just setting <code>fixed = FALSE</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">str</span>(<span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(p, <span class="dt">inner =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">## List of 5</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-5" data-line-number="5">##   .. ..$ : int [1:90] 99 87 43 116 7 73 113 110 62 14 ...</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">##   .. ..$ : int [1:90] 15 99 87 43 6 71 27 109 42 7 ...</a>
<a class="sourceLine" id="cb25-7" data-line-number="7">##   .. ..$ : int [1:90] 15 99 6 71 27 109 116 42 7 113 ...</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">##   .. ..$ : int [1:90] 15 87 43 6 71 27 109 116 42 73 ...</a>
<a class="sourceLine" id="cb25-9" data-line-number="9">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-10" data-line-number="10">##   .. ..$ : int [1:30] 1 6 11 12 15 23 26 27 30 39 ...</a>
<a class="sourceLine" id="cb25-11" data-line-number="11">##   .. ..$ : int [1:30] 4 5 8 13 16 17 18 19 21 32 ...</a>
<a class="sourceLine" id="cb25-12" data-line-number="12">##   .. ..$ : int [1:30] 2 3 9 24 25 28 29 31 36 43 ...</a>
<a class="sourceLine" id="cb25-13" data-line-number="13">##   .. ..$ : int [1:30] 7 10 14 20 22 34 35 38 40 41 ...</a>
<a class="sourceLine" id="cb25-14" data-line-number="14">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-15" data-line-number="15">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-16" data-line-number="16">##   .. ..$ : int [1:90] 4 91 86 74 25 34 8 38 70 60 ...</a>
<a class="sourceLine" id="cb25-17" data-line-number="17">##   .. ..$ : int [1:90] 4 91 86 74 34 8 70 60 52 17 ...</a>
<a class="sourceLine" id="cb25-18" data-line-number="18">##   .. ..$ : int [1:90] 4 86 25 34 8 38 70 80 52 17 ...</a>
<a class="sourceLine" id="cb25-19" data-line-number="19">##   .. ..$ : int [1:90] 91 74 25 38 60 80 52 12 11 113 ...</a>
<a class="sourceLine" id="cb25-20" data-line-number="20">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-21" data-line-number="21">##   .. ..$ : int [1:30] 5 10 18 21 27 31 43 44 48 49 ...</a>
<a class="sourceLine" id="cb25-22" data-line-number="22">##   .. ..$ : int [1:30] 1 7 11 12 14 22 25 26 30 37 ...</a>
<a class="sourceLine" id="cb25-23" data-line-number="23">##   .. ..$ : int [1:30] 2 3 9 23 24 28 29 32 35 39 ...</a>
<a class="sourceLine" id="cb25-24" data-line-number="24">##   .. ..$ : int [1:30] 4 6 8 13 15 16 17 19 20 33 ...</a>
<a class="sourceLine" id="cb25-25" data-line-number="25">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-26" data-line-number="26">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-27" data-line-number="27">##   .. ..$ : int [1:90] 40 82 118 68 64 14 95 57 53 36 ...</a>
<a class="sourceLine" id="cb25-28" data-line-number="28">##   .. ..$ : int [1:90] 119 58 12 40 82 112 15 41 45 118 ...</a>
<a class="sourceLine" id="cb25-29" data-line-number="29">##   .. ..$ : int [1:90] 119 58 12 40 112 15 41 45 14 114 ...</a>
<a class="sourceLine" id="cb25-30" data-line-number="30">##   .. ..$ : int [1:90] 119 58 12 82 112 15 41 45 118 68 ...</a>
<a class="sourceLine" id="cb25-31" data-line-number="31">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-32" data-line-number="32">##   .. ..$ : int [1:30] 2 4 7 12 15 16 17 19 21 30 ...</a>
<a class="sourceLine" id="cb25-33" data-line-number="33">##   .. ..$ : int [1:30] 6 8 13 20 22 32 33 35 37 38 ...</a>
<a class="sourceLine" id="cb25-34" data-line-number="34">##   .. ..$ : int [1:30] 3 9 18 23 27 29 42 43 48 49 ...</a>
<a class="sourceLine" id="cb25-35" data-line-number="35">##   .. ..$ : int [1:30] 1 5 10 11 14 24 25 26 28 36 ...</a>
<a class="sourceLine" id="cb25-36" data-line-number="36">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-37" data-line-number="37">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-38" data-line-number="38">##   .. ..$ : int [1:90] 53 116 82 31 106 4 95 89 61 98 ...</a>
<a class="sourceLine" id="cb25-39" data-line-number="39">##   .. ..$ : int [1:90] 75 53 116 82 31 109 7 50 78 11 ...</a>
<a class="sourceLine" id="cb25-40" data-line-number="40">##   .. ..$ : int [1:90] 75 53 116 106 4 95 89 61 98 16 ...</a>
<a class="sourceLine" id="cb25-41" data-line-number="41">##   .. ..$ : int [1:90] 75 82 31 106 4 95 89 61 98 16 ...</a>
<a class="sourceLine" id="cb25-42" data-line-number="42">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-43" data-line-number="43">##   .. ..$ : int [1:30] 1 2 8 22 23 25 26 28 33 38 ...</a>
<a class="sourceLine" id="cb25-44" data-line-number="44">##   .. ..$ : int [1:30] 4 10 16 21 24 27 41 42 45 46 ...</a>
<a class="sourceLine" id="cb25-45" data-line-number="45">##   .. ..$ : int [1:30] 6 9 12 18 20 31 32 35 36 37 ...</a>
<a class="sourceLine" id="cb25-46" data-line-number="46">##   .. ..$ : int [1:30] 3 5 7 11 13 14 15 17 19 29 ...</a>
<a class="sourceLine" id="cb25-47" data-line-number="47">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-48" data-line-number="48">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-49" data-line-number="49">##   .. ..$ : int [1:90] 67 37 51 12 102 50 86 17 115 101 ...</a>
<a class="sourceLine" id="cb25-50" data-line-number="50">##   .. ..$ : int [1:90] 18 90 67 11 39 37 102 1 50 17 ...</a>
<a class="sourceLine" id="cb25-51" data-line-number="51">##   .. ..$ : int [1:90] 18 90 67 11 39 37 51 12 1 50 ...</a>
<a class="sourceLine" id="cb25-52" data-line-number="52">##   .. ..$ : int [1:90] 18 90 11 39 51 12 102 1 86 17 ...</a>
<a class="sourceLine" id="cb25-53" data-line-number="53">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-54" data-line-number="54">##   .. ..$ : int [1:30] 1 5 10 11 13 18 21 22 26 33 ...</a>
<a class="sourceLine" id="cb25-55" data-line-number="55">##   .. ..$ : int [1:30] 6 8 12 15 16 29 30 32 34 35 ...</a>
<a class="sourceLine" id="cb25-56" data-line-number="56">##   .. ..$ : int [1:30] 4 9 14 17 23 27 40 41 45 46 ...</a>
<a class="sourceLine" id="cb25-57" data-line-number="57">##   .. ..$ : int [1:30] 2 3 7 19 20 24 25 28 31 37 ...</a></code></pre></div>
</div>
</div>
<div id="resample-descriptions-and-resample-instances" class="section level2">
<h2 class="hasAnchor">
<a href="#resample-descriptions-and-resample-instances" class="anchor"></a>Resample descriptions and resample instances</h2>
<p>As already mentioned, you can specify a resampling strategy using function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">rdesc</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb26-6" data-line-number="6"></a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="kw">str</span>(rdesc)</a>
<a class="sourceLine" id="cb26-8" data-line-number="8">## List of 6</a>
<a class="sourceLine" id="cb26-9" data-line-number="9">##  $ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb26-10" data-line-number="10">##  $ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb26-11" data-line-number="11">##  $ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb26-12" data-line-number="12">##  $ iters      : int 3</a>
<a class="sourceLine" id="cb26-13" data-line-number="13">##  $ predict    : chr "test"</a>
<a class="sourceLine" id="cb26-14" data-line-number="14">##  $ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb26-15" data-line-number="15">##  - attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb26-16" data-line-number="16"></a>
<a class="sourceLine" id="cb26-17" data-line-number="17"><span class="kw">str</span>(<span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>))</a>
<a class="sourceLine" id="cb26-18" data-line-number="18">## List of 8</a>
<a class="sourceLine" id="cb26-19" data-line-number="19">##  $ split        : num 0.667</a>
<a class="sourceLine" id="cb26-20" data-line-number="20">##  $ id           : chr "subsampling"</a>
<a class="sourceLine" id="cb26-21" data-line-number="21">##  $ iters        : int 30</a>
<a class="sourceLine" id="cb26-22" data-line-number="22">##  $ predict      : chr "test"</a>
<a class="sourceLine" id="cb26-23" data-line-number="23">##  $ stratify     : logi FALSE</a>
<a class="sourceLine" id="cb26-24" data-line-number="24">##  $ stratify.cols: chr "chas"</a>
<a class="sourceLine" id="cb26-25" data-line-number="25">##  $ fixed        : logi FALSE</a>
<a class="sourceLine" id="cb26-26" data-line-number="26">##  $ blocking.cv  : logi FALSE</a>
<a class="sourceLine" id="cb26-27" data-line-number="27">##  - attr(*, "class")= chr [1:2] "SubsampleDesc" "ResampleDesc"</a></code></pre></div>
<p>The result <code>rdesc</code> inherits from class <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) (short for resample description) and, in principle, contains all necessary information about the resampling strategy including the number of iterations, the proportion of training and test sets, stratification variables, etc.</p>
<p>Given either the size of the data set at hand or the <code><a href="../../reference/Task.html">Task()</a></code>, function <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> draws the training and test sets according to the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># Create a resample instance based an a task</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, iris.task)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3">rin</a>
<a class="sourceLine" id="cb27-4" data-line-number="4">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb27-5" data-line-number="5">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">## Predict: test</a>
<a class="sourceLine" id="cb27-7" data-line-number="7">## Stratification: FALSE</a>
<a class="sourceLine" id="cb27-8" data-line-number="8"></a>
<a class="sourceLine" id="cb27-9" data-line-number="9"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb27-10" data-line-number="10">## List of 5</a>
<a class="sourceLine" id="cb27-11" data-line-number="11">##  $ desc      :List of 6</a>
<a class="sourceLine" id="cb27-12" data-line-number="12">##   ..$ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb27-13" data-line-number="13">##   ..$ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb27-14" data-line-number="14">##   ..$ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb27-15" data-line-number="15">##   ..$ iters      : int 3</a>
<a class="sourceLine" id="cb27-16" data-line-number="16">##   ..$ predict    : chr "test"</a>
<a class="sourceLine" id="cb27-17" data-line-number="17">##   ..$ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb27-18" data-line-number="18">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb27-19" data-line-number="19">##  $ size      : int 150</a>
<a class="sourceLine" id="cb27-20" data-line-number="20">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb27-21" data-line-number="21">##   ..$ : int [1:100] 133 69 58 126 68 101 103 143 83 142 ...</a>
<a class="sourceLine" id="cb27-22" data-line-number="22">##   ..$ : int [1:100] 133 7 44 69 71 58 68 26 2 50 ...</a>
<a class="sourceLine" id="cb27-23" data-line-number="23">##   ..$ : int [1:100] 7 44 71 126 26 2 50 101 103 85 ...</a>
<a class="sourceLine" id="cb27-24" data-line-number="24">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb27-25" data-line-number="25">##   ..$ : int [1:50] 2 4 7 8 9 11 26 29 30 39 ...</a>
<a class="sourceLine" id="cb27-26" data-line-number="26">##   ..$ : int [1:50] 1 5 12 13 14 17 18 25 31 33 ...</a>
<a class="sourceLine" id="cb27-27" data-line-number="27">##   ..$ : int [1:50] 3 6 10 15 16 19 20 21 22 23 ...</a>
<a class="sourceLine" id="cb27-28" data-line-number="28">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb27-29" data-line-number="29">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb27-30" data-line-number="30"></a>
<a class="sourceLine" id="cb27-31" data-line-number="31"><span class="co"># Create a resample instance given the size of the data set</span></a>
<a class="sourceLine" id="cb27-32" data-line-number="32">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">size =</span> <span class="kw">nrow</span>(iris))</a>
<a class="sourceLine" id="cb27-33" data-line-number="33"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb27-34" data-line-number="34">## List of 5</a>
<a class="sourceLine" id="cb27-35" data-line-number="35">##  $ desc      :List of 6</a>
<a class="sourceLine" id="cb27-36" data-line-number="36">##   ..$ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb27-37" data-line-number="37">##   ..$ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb27-38" data-line-number="38">##   ..$ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb27-39" data-line-number="39">##   ..$ iters      : int 3</a>
<a class="sourceLine" id="cb27-40" data-line-number="40">##   ..$ predict    : chr "test"</a>
<a class="sourceLine" id="cb27-41" data-line-number="41">##   ..$ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb27-42" data-line-number="42">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb27-43" data-line-number="43">##  $ size      : int 150</a>
<a class="sourceLine" id="cb27-44" data-line-number="44">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb27-45" data-line-number="45">##   ..$ : int [1:100] 101 114 15 131 5 22 144 64 104 61 ...</a>
<a class="sourceLine" id="cb27-46" data-line-number="46">##   ..$ : int [1:100] 101 131 5 87 144 31 104 75 59 14 ...</a>
<a class="sourceLine" id="cb27-47" data-line-number="47">##   ..$ : int [1:100] 114 15 22 87 64 31 61 59 130 77 ...</a>
<a class="sourceLine" id="cb27-48" data-line-number="48">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb27-49" data-line-number="49">##   ..$ : int [1:50] 4 6 11 12 20 23 28 31 32 33 ...</a>
<a class="sourceLine" id="cb27-50" data-line-number="50">##   ..$ : int [1:50] 1 2 3 7 8 15 16 18 19 22 ...</a>
<a class="sourceLine" id="cb27-51" data-line-number="51">##   ..$ : int [1:50] 5 9 10 13 14 17 21 24 26 29 ...</a>
<a class="sourceLine" id="cb27-52" data-line-number="52">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb27-53" data-line-number="53">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb27-54" data-line-number="54"></a>
<a class="sourceLine" id="cb27-55" data-line-number="55"><span class="co"># Access the indices of the training observations in iteration 3</span></a>
<a class="sourceLine" id="cb27-56" data-line-number="56">rin<span class="op">$</span>train.inds[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb27-57" data-line-number="57">##   [1] 114  15  22  87  64  31  61  59 130  77  71   7  39  34   6  93  32</a>
<a class="sourceLine" id="cb27-58" data-line-number="58">##  [18] 108 139  90  99 132  69  76  60 115  18 120 109  92 128 113  37 118</a>
<a class="sourceLine" id="cb27-59" data-line-number="59">##  [35]  11  97 112  23  28  54  74  33 143 146 129 107 100 134 111   3  47</a>
<a class="sourceLine" id="cb27-60" data-line-number="60">##  [52] 133 106  88  38  94  45  96  25  79  19  50  72 145  62  12  82 137</a>
<a class="sourceLine" id="cb27-61" data-line-number="61">##  [69]  40  66   4  80 125  46  27  51  20  57 138 147  49  52 102  86 121</a>
<a class="sourceLine" id="cb27-62" data-line-number="62">##  [86] 141   1 135  53 105  16   8  35  70  67 149 103  36   2  73</a></code></pre></div>
<p>The result <code>rin</code> inherits from class <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) and contains <code>list</code>s of index vectors for the train and test sets.</p>
<p>If a <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) is passed to <code><a href="../../reference/resample.html">resample()</a></code>, it is instantiated internally. Naturally, it is also possible to pass a <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) directly.</p>
<p>While the separation between resample descriptions, resample instances, and the <code><a href="../../reference/resample.html">resample()</a></code> function itself seems overly complicated, it has several advantages:</p>
<ul>
<li>Resample instances readily allow for paired experiments, that is comparing the performance of several learners on exactly the same training and test sets. This is particularly useful if you want to add another method to a comparison experiment you already did. Moreover, you can store the resample instance along with your data in order to be able to reproduce your results later on.</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">task =</span> iris.task)</a>
<a class="sourceLine" id="cb28-3" data-line-number="3"></a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="co"># Calculate the performance of two learners based on the same resample instance</span></a>
<a class="sourceLine" id="cb28-5" data-line-number="5">r.lda =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">r.rpart =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb28-7" data-line-number="7">r.lda<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb28-8" data-line-number="8">## mmce.test.mean </a>
<a class="sourceLine" id="cb28-9" data-line-number="9">##     0.02666667</a>
<a class="sourceLine" id="cb28-10" data-line-number="10"></a>
<a class="sourceLine" id="cb28-11" data-line-number="11">r.rpart<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb28-12" data-line-number="12">## mmce.test.mean </a>
<a class="sourceLine" id="cb28-13" data-line-number="13">##     0.06666667</a></code></pre></div>
<ul>
<li>In order to add further resampling methods you can simply derive from the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) and <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) classes, but you do neither have to touch <code><a href="../../reference/resample.html">resample()</a></code> nor any further methods that use the resampling strategy.</li>
</ul>
<p>Usually, when calling <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> the train and test index sets are drawn randomly. Mainly for <em>holdout</em> (<em>test sample</em>) <em>estimation</em> you might want full control about the training and tests set and specify them manually. This can be done using function <code><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance()</a></code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance</a></span>(<span class="dt">train.inds =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">test.inds =</span> <span class="dv">101</span><span class="op">:</span><span class="dv">150</span>, <span class="dt">size =</span> <span class="dv">150</span>)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">rin</a>
<a class="sourceLine" id="cb29-3" data-line-number="3">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb29-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb29-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb29-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="aggregating-performance-values" class="section level2">
<h2 class="hasAnchor">
<a href="#aggregating-performance-values" class="anchor"></a>Aggregating performance values</h2>
<p>In each resampling iteration <span class="math inline">\(b = 1,\ldots,B\)</span> we get performance values <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> (for each measure we wish to calculate), which are then aggregated to an overall performance.</p>
<p>For the great majority of common resampling strategies (like holdout, cross-validation, subsampling) performance values are calculated on the test data sets only and for most measures aggregated by taking the mean (<code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>)).</p>
<p>Each performance <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) in <code>mlr</code> has a corresponding default aggregation method which is stored in slot <code>$aggr</code>. The default aggregation for most measures is <code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>). One exception is the root mean square error (<a href="measures.html" target="_blank">rmse</a>).</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="co"># Mean misclassification error</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2">mmce<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb30-3" data-line-number="3">## Aggregation function: test.mean</a>
<a class="sourceLine" id="cb30-4" data-line-number="4"></a>
<a class="sourceLine" id="cb30-5" data-line-number="5">mmce<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb30-6" data-line-number="6">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb30-7" data-line-number="7">## mean(perf.test)</a>
<a class="sourceLine" id="cb30-8" data-line-number="8">## &lt;bytecode: 0x96e0340&gt;</a>
<a class="sourceLine" id="cb30-9" data-line-number="9">## &lt;environment: namespace:mlr&gt;</a>
<a class="sourceLine" id="cb30-10" data-line-number="10"></a>
<a class="sourceLine" id="cb30-11" data-line-number="11"><span class="co"># Root mean square error</span></a>
<a class="sourceLine" id="cb30-12" data-line-number="12">rmse<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb30-13" data-line-number="13">## Aggregation function: test.rmse</a>
<a class="sourceLine" id="cb30-14" data-line-number="14"></a>
<a class="sourceLine" id="cb30-15" data-line-number="15">rmse<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb30-16" data-line-number="16">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb30-17" data-line-number="17">## sqrt(mean(perf.test^2))</a>
<a class="sourceLine" id="cb30-18" data-line-number="18">## &lt;bytecode: 0x1233e078&gt;</a>
<a class="sourceLine" id="cb30-19" data-line-number="19">## &lt;environment: namespace:mlr&gt;</a></code></pre></div>
<p>You can change the aggregation method of a <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) via function <code><a href="../../reference/setAggregation.html">setAggregation()</a></code>. All available aggregation schemes are listed on the <code><a href="../../reference/aggregations.html">aggregations()</a></code> documentation page.</p>
<div id="example-one-measure-with-different-aggregations" class="section level4">
<h4 class="hasAnchor">
<a href="#example-one-measure-with-different-aggregations" class="anchor"></a>Example: One measure with different aggregations</h4>
<p>The aggregation schemes <code>test.median</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), <code>test.min</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), and <code>text.max</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) compute the median, minimum, and maximum of the performance values on the test sets.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">mseTestMedian =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.median)</a>
<a class="sourceLine" id="cb31-2" data-line-number="2">mseTestMin =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.min)</a>
<a class="sourceLine" id="cb31-3" data-line-number="3">mseTestMax =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.max)</a>
<a class="sourceLine" id="cb31-4" data-line-number="4"></a>
<a class="sourceLine" id="cb31-5" data-line-number="5">mseTestMedian</a>
<a class="sourceLine" id="cb31-6" data-line-number="6">## Name: Mean of squared errors</a>
<a class="sourceLine" id="cb31-7" data-line-number="7">## Performance measure: mse</a>
<a class="sourceLine" id="cb31-8" data-line-number="8">## Properties: regr,req.pred,req.truth</a>
<a class="sourceLine" id="cb31-9" data-line-number="9">## Minimize: TRUE</a>
<a class="sourceLine" id="cb31-10" data-line-number="10">## Best: 0; Worst: Inf</a>
<a class="sourceLine" id="cb31-11" data-line-number="11">## Aggregated by: test.median</a>
<a class="sourceLine" id="cb31-12" data-line-number="12">## Arguments: list()</a>
<a class="sourceLine" id="cb31-13" data-line-number="13">## Note: Defined as: mean((response - truth)^2)</a>
<a class="sourceLine" id="cb31-14" data-line-number="14"></a>
<a class="sourceLine" id="cb31-15" data-line-number="15">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb31-16" data-line-number="16">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mseTestMedian, mseTestMin, mseTestMax))</a>
<a class="sourceLine" id="cb31-17" data-line-number="17">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb31-18" data-line-number="18">## Measures:             mse       mse       mse       mse</a>
<a class="sourceLine" id="cb31-19" data-line-number="19">## [Resample] iter 1:    25.124490825.124490825.124490825.1244908</a>
<a class="sourceLine" id="cb31-20" data-line-number="20">## [Resample] iter 2:    18.612568118.612568118.612568118.6125681</a>
<a class="sourceLine" id="cb31-21" data-line-number="21">## [Resample] iter 3:    27.405747527.405747527.405747527.4057475</a>
<a class="sourceLine" id="cb31-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb31-23" data-line-number="23">## Aggregated Result: mse.test.mean=23.7142688,mse.test.median=25.1244908,mse.test.min=18.6125681,mse.test.max=27.4057475</a>
<a class="sourceLine" id="cb31-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb31-25" data-line-number="25"></a>
<a class="sourceLine" id="cb31-26" data-line-number="26">r</a>
<a class="sourceLine" id="cb31-27" data-line-number="27">## Resample Result</a>
<a class="sourceLine" id="cb31-28" data-line-number="28">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb31-29" data-line-number="29">## Learner: regr.lm</a>
<a class="sourceLine" id="cb31-30" data-line-number="30">## Aggr perf: mse.test.mean=23.7142688,mse.test.median=25.1244908,mse.test.min=18.6125681,mse.test.max=27.4057475</a>
<a class="sourceLine" id="cb31-31" data-line-number="31">## Runtime: 0.0274425</a>
<a class="sourceLine" id="cb31-32" data-line-number="32"></a>
<a class="sourceLine" id="cb31-33" data-line-number="33">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb31-34" data-line-number="34">##   mse.test.mean mse.test.median    mse.test.min    mse.test.max </a>
<a class="sourceLine" id="cb31-35" data-line-number="35">##        23.71427        25.12449        18.61257        27.40575</a></code></pre></div>
</div>
<div id="example-calculating-the-training-error" class="section level3">
<h3 class="hasAnchor">
<a href="#example-calculating-the-training-error" class="anchor"></a>Example: Calculating the training error</h3>
<p>Below we calculate the mean misclassification error (<a href="measures.html" target="_blank">mmce</a>) on the training and the test data sets. Note that we have to set <code>predict = "both"</code> when calling <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> in order to get predictions on both training and test sets.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">mmceTrainMean =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, train.mean)</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb32-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceTrainMean))</a>
<a class="sourceLine" id="cb32-4" data-line-number="4">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb32-5" data-line-number="5">## Measures:             mmce.train   mmce.test</a>
<a class="sourceLine" id="cb32-6" data-line-number="6">## [Resample] iter 1:    0.0400000    0.0400000</a>
<a class="sourceLine" id="cb32-7" data-line-number="7">## [Resample] iter 2:    0.0300000    0.0600000</a>
<a class="sourceLine" id="cb32-8" data-line-number="8">## [Resample] iter 3:    0.0300000    0.1000000</a>
<a class="sourceLine" id="cb32-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb32-10" data-line-number="10">## Aggregated Result: mmce.test.mean=0.0666667,mmce.train.mean=0.0333333</a>
<a class="sourceLine" id="cb32-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb32-12" data-line-number="12"></a>
<a class="sourceLine" id="cb32-13" data-line-number="13">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb32-14" data-line-number="14">##   iter mmce mmce</a>
<a class="sourceLine" id="cb32-15" data-line-number="15">## 1    1 0.04 0.04</a>
<a class="sourceLine" id="cb32-16" data-line-number="16">## 2    2 0.03 0.03</a>
<a class="sourceLine" id="cb32-17" data-line-number="17">## 3    3 0.03 0.03</a>
<a class="sourceLine" id="cb32-18" data-line-number="18"></a>
<a class="sourceLine" id="cb32-19" data-line-number="19">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb32-20" data-line-number="20">##  mmce.test.mean mmce.train.mean </a>
<a class="sourceLine" id="cb32-21" data-line-number="21">##      0.06666667      0.03333333</a></code></pre></div>
</div>
<div id="example-bootstrap" class="section level3">
<h3 class="hasAnchor">
<a href="#example-bootstrap" class="anchor"></a>Example: Bootstrap</h3>
<p>In <em>out-of-bag bootstrap estimation</em> <span class="math inline">\(B\)</span> new data sets <span class="math inline">\(D^{*1}, \ldots, D^{*B}\)</span> are drawn from the data set <span class="math inline">\(D\)</span> with replacement, each of the same size as <span class="math inline">\(D\)</span>. In the <span class="math inline">\(b\)</span>-th iteration, <span class="math inline">\(D^{*b}\)</span> forms the training set, while the remaining elements from <span class="math inline">\(D\)</span>, i.e., <span class="math inline">\(D \setminus D^{*b}\)</span>, form the test set.</p>
<!--(
                     |resampling_desc_figure|

                     |resampling_nested_resampling_figure|
)-->
<p>The <em>b632</em> and <em>b632+</em> variants calculate a convex combination of the training performance and the out-of-bag bootstrap performance and thus require predictions on the training sets and an appropriate aggregation strategy.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="co"># Use bootstrap as resampling strategy and predict on both train and test sets</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Bootstrap"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>, <span class="dt">iters =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb33-3" data-line-number="3"></a>
<a class="sourceLine" id="cb33-4" data-line-number="4"><span class="co"># Set aggregation schemes for b632 and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb33-5" data-line-number="5">mmceB632 =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632)</a>
<a class="sourceLine" id="cb33-6" data-line-number="6">mmceB632plus =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632plus)</a>
<a class="sourceLine" id="cb33-7" data-line-number="7"></a>
<a class="sourceLine" id="cb33-8" data-line-number="8">mmceB632</a>
<a class="sourceLine" id="cb33-9" data-line-number="9">## Name: Mean misclassification error</a>
<a class="sourceLine" id="cb33-10" data-line-number="10">## Performance measure: mmce</a>
<a class="sourceLine" id="cb33-11" data-line-number="11">## Properties: classif,classif.multi,req.pred,req.truth</a>
<a class="sourceLine" id="cb33-12" data-line-number="12">## Minimize: TRUE</a>
<a class="sourceLine" id="cb33-13" data-line-number="13">## Best: 0; Worst: 1</a>
<a class="sourceLine" id="cb33-14" data-line-number="14">## Aggregated by: b632</a>
<a class="sourceLine" id="cb33-15" data-line-number="15">## Arguments: list()</a>
<a class="sourceLine" id="cb33-16" data-line-number="16">## Note: Defined as: mean(response != truth)</a>
<a class="sourceLine" id="cb33-17" data-line-number="17"></a>
<a class="sourceLine" id="cb33-18" data-line-number="18">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceB632, mmceB632plus),</a>
<a class="sourceLine" id="cb33-19" data-line-number="19">  <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb33-20" data-line-number="20"><span class="kw">head</span>(r<span class="op">$</span>measures.train)</a>
<a class="sourceLine" id="cb33-21" data-line-number="21">##   iter       mmce       mmce       mmce</a>
<a class="sourceLine" id="cb33-22" data-line-number="22">## 1    1 0.02000000 0.02000000 0.02000000</a>
<a class="sourceLine" id="cb33-23" data-line-number="23">## 2    2 0.04666667 0.04666667 0.04666667</a>
<a class="sourceLine" id="cb33-24" data-line-number="24">## 3    3 0.02000000 0.02000000 0.02000000</a>
<a class="sourceLine" id="cb33-25" data-line-number="25">## 4    4 0.02666667 0.02666667 0.02666667</a>
<a class="sourceLine" id="cb33-26" data-line-number="26">## 5    5 0.03333333 0.03333333 0.03333333</a>
<a class="sourceLine" id="cb33-27" data-line-number="27">## 6    6 0.04000000 0.04000000 0.04000000</a>
<a class="sourceLine" id="cb33-28" data-line-number="28"></a>
<a class="sourceLine" id="cb33-29" data-line-number="29"><span class="co"># Compare misclassification rates for out-of-bag, b632, and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb33-30" data-line-number="30">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb33-31" data-line-number="31">## mmce.test.mean      mmce.b632  mmce.b632plus </a>
<a class="sourceLine" id="cb33-32" data-line-number="32">##     0.04412204     0.03818913     0.03855644</a></code></pre></div>
</div>
</div>
<div id="convenience-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#convenience-functions" class="anchor"></a>Convenience functions</h2>
<p>The functionality described on this page allows for much control and flexibility. However, when quickly trying out some learners, it can get tedious to type all the code for defining the resampling strategy, setting the aggregation scheme and so on. As mentioned above, <code>mlr</code> includes some pre-defined resample description objects for frequently used strategies like, e.g., 5-fold cross-validation (<code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)). Moreover, <code>mlr</code> provides special functions for the most common resampling methods, for example <code>holdout</code> (<code><a href="../../reference/resample.html">resample()</a></code>), <code>crossval</code> (<code><a href="../../reference/resample.html">resample()</a></code>), or <code>bootstrapB632</code> (<code><a href="../../reference/resample.html">resample()</a></code>).</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw"><a href="../../reference/resample.html">crossval</a></span>(<span class="st">"classif.lda"</span>, iris.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, ber))</a>
<a class="sourceLine" id="cb34-2" data-line-number="2">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">## Measures:             mmce      ber</a>
<a class="sourceLine" id="cb34-4" data-line-number="4">## [Resample] iter 1:    0.0200000 0.0166667</a>
<a class="sourceLine" id="cb34-5" data-line-number="5">## [Resample] iter 2:    0.0200000 0.0185185</a>
<a class="sourceLine" id="cb34-6" data-line-number="6">## [Resample] iter 3:    0.0200000 0.0208333</a>
<a class="sourceLine" id="cb34-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb34-8" data-line-number="8">## Aggregated Result: mmce.test.mean=0.0200000,ber.test.mean=0.0186728</a>
<a class="sourceLine" id="cb34-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb34-10" data-line-number="10">## Resample Result</a>
<a class="sourceLine" id="cb34-11" data-line-number="11">## Task: iris-example</a>
<a class="sourceLine" id="cb34-12" data-line-number="12">## Learner: classif.lda</a>
<a class="sourceLine" id="cb34-13" data-line-number="13">## Aggr perf: mmce.test.mean=0.0200000,ber.test.mean=0.0186728</a>
<a class="sourceLine" id="cb34-14" data-line-number="14">## Runtime: 0.0235622</a>
<a class="sourceLine" id="cb34-15" data-line-number="15"></a>
<a class="sourceLine" id="cb34-16" data-line-number="16"><span class="kw"><a href="../../reference/resample.html">bootstrapB632plus</a></span>(<span class="st">"regr.lm"</span>, bh.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mae))</a>
<a class="sourceLine" id="cb34-17" data-line-number="17">## Resampling: OOB bootstrapping</a>
<a class="sourceLine" id="cb34-18" data-line-number="18">## Measures:             mse.train   mae.train   mse.test    mae.test</a>
<a class="sourceLine" id="cb34-19" data-line-number="19">## [Resample] iter 1:    20.4910686  3.2200562   26.5887624  3.6503615</a>
<a class="sourceLine" id="cb34-20" data-line-number="20">## [Resample] iter 2:    23.7859418  3.4609077   20.0816902  3.3611031</a>
<a class="sourceLine" id="cb34-21" data-line-number="21">## [Resample] iter 3:    21.4117329  3.3384863   28.6243293  3.6391500</a>
<a class="sourceLine" id="cb34-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb34-23" data-line-number="23">## Aggregated Result: mse.b632plus=23.9779139,mae.b632plus=3.4762339</a>
<a class="sourceLine" id="cb34-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb34-25" data-line-number="25">## Resample Result</a>
<a class="sourceLine" id="cb34-26" data-line-number="26">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb34-27" data-line-number="27">## Learner: regr.lm</a>
<a class="sourceLine" id="cb34-28" data-line-number="28">## Aggr perf: mse.b632plus=23.9779139,mae.b632plus=3.4762339</a>
<a class="sourceLine" id="cb34-29" data-line-number="29">## Runtime: 0.0375972</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li><a href="#accessing-resample-results">Accessing resample results</a></li>
      <li><a href="#stratification-blocking-and-grouping">Stratification, Blocking and Grouping</a></li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li><a href="#aggregating-performance-values">Aggregating performance values</a></li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><!--<div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo, Patrick Schratz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
--></footer>
</div>

   
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript"> docsearch({
 apiKey: 'e300ecafdf04fe1199e3339c825ce7d0',
 indexName: 'mlr',
 inputSelector: 'input#search-input.form-control',
 debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>
