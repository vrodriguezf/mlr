<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification --><meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84">
<title>Resampling • mlr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="Resampling">
<meta property="og:description" content="">
<meta property="og:image" content="https://mlr-org.github.io/mlr/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/task.html">Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learner.html">Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/train.html">Train</a>
    </li>
    <li>
      <a href="../../articles/tutorial/predict.html">Predict</a>
    </li>
    <li>
      <a href="../../articles/tutorial/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../../articles/tutorial/performance.html">Performance</a>
    </li>
    <li>
      <a href="../../articles/tutorial/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/benchmark_experiments.html">Benchmark Experiments</a>
    </li>
    <li>
      <a href="../../articles/tutorial/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/visualization.html">Visualization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/usecase_regression.html">Use case - Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/configureMlr.html">Configuration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/wrapper.html">Wrapped Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../../articles/tutorial/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/feature_selection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/over_and_undersampling.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../../articles/tutorial/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learning_curve.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li>
      <a href="../../articles/tutorial/handling_of_spatial_data.html">Handling of Spatial Data</a>
    </li>
    <li>
      <a href="../../articles/tutorial/functional_data.html">Functional Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extending
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/create_learner.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_measure.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_imputation.html">Create Imputation Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="../../news/index.html">News</a>
    </li>
    <li>
      <a href="../../articles/tutorial/example_tasks.html">Example Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/measures.html">Implemented Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/mlr_publications.html">mlr Publications</a>
    </li>
    <li>
      <a href="../../articles/tutorial/talks_videos_workshops.html">Talks, Videos and Workshops</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    mlr-org Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/mlr-org/mlrMBO">mlrMBO</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlrCPO">mlrCPO</a>
    </li>
    <li>
      <a href="http://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    </li>
    <li>
      <a href="http://openml.github.io/openml-r/vignettes/OpenML.html">OpenML</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-blog.netlify.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Resampling</h1>
            
      
      <!--The 'toc' block was inserted manually by @pat-s. It triggeres the inline ToC in the vignettes.-->
            <div id="toc">
      <h3 class="hasAnchor">
<a href="#toc" class="anchor"></a>Table of Contents</h3>
      <ul>
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li>
<a href="#accessing-resample-results">Accessing resample results</a><ul>
<li><a href="#predictions">Predictions</a></li>
      <li><a href="#learner-models">Learner models</a></li>
      <li><a href="#the-extract-option">The extract option</a></li>
      </ul>
</li>
      <li>
<a href="#stratification-and-blocking">Stratification and blocking</a><ul>
<li><a href="#stratification-with-respect-to-the-target-variables">Stratification with respect to the target variable(s)</a></li>
      <li><a href="#stratification-with-respect-to-explanatory-variables">Stratification with respect to explanatory variables</a></li>
      <li><a href="#blocking">Blocking</a></li>
      </ul>
</li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li>
<a href="#aggregating-performance-values">Aggregating performance values</a><ul>
<li><a href="#example-one-measure-with-different-aggregations">Example: One measure with different aggregations</a></li>
      <li><a href="#example-calculating-the-training-error">Example: Calculating the training error</a></li>
      <li><a href="#example-bootstrap">Example: Bootstrap</a></li>
      </ul>
</li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      
      <small>Source: <a href="https://github.com/mlr-org/mlr/blob/master/vignettes/tutorial/resample.Rmd"><code>vignettes/tutorial/resample.Rmd</code></a></small>

    </div>

    
    
<div class="contents">
<p>Resampling strategies are usually used to assess the performance of a learning algorithm: The entire data set is (repeatedly) split into training sets <span class="math inline">\(D^{*b}\)</span> and test sets <span class="math inline">\(D \setminus D^{*b}\)</span>, <span class="math inline">\(b = 1,\ldots,B\)</span>. The learner is trained on each training set, predictions are made on the corresponding test set (sometimes on the training set as well) and the performance measure <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> is calculated. Then the <span class="math inline">\(B\)</span> individual performance values are aggregated, most often by calculating the mean. There exist various different resampling strategies, for example cross-validation and bootstrap, to mention just two popular approaches.</p>
<div class="figure" style="text-align: center">
<img src="https://raw.githubusercontent.com/pat-s/mlr/master/vignettes/tutorial/devel/pdf/img/resampling.png" alt="Resampling Figure" width="600px"><p class="caption">
Resampling Figure
</p>
</div>
<p>If you want to read up on further details, the paper <a href="http://link.springer.com/chapter/10.1007%2F978-0-387-47509-7_8">Resampling Strategies for Model Assessment and Selection</a> by Simon is probably not a bad choice. Bernd has also published a paper <a href="http://www.mitpressjournals.org/doi/pdf/10.1162/EVCO_a_00069">Resampling methods for meta-model validation with recommendations for evolutionary computation</a> which contains detailed descriptions and lots of statistical background information on resampling methods.</p>
<div id="defining-the-resampling-strategy" class="section level1">
<h1 class="hasAnchor">
<a href="#defining-the-resampling-strategy" class="anchor"></a>Defining the resampling strategy</h1>
<p>In <code>mlr</code> the resampling strategy can be defined via function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. It requires a string that specifies the resampling method and, depending on the selected strategy, further information like the number of iterations. The supported resampling strategies are:</p>
<ul>
<li>Cross-validation (<code>"CV"</code>),</li>
<li>Leave-one-out cross-validation (<code>"LOO"</code>),</li>
<li>Repeated cross-validation (<code>"RepCV"</code>),</li>
<li>Out-of-bag bootstrap and other variants like <em>b632</em> (<code>"Bootstrap"</code>),</li>
<li>Subsampling, also called Monte-Carlo cross-validation (<code>"Subsample"</code>),</li>
<li>Holdout (training/test) (<code>"Holdout"</code>).</li>
</ul>
<p>For example if you want to use 3-fold cross-validation type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>For holdout estimation use:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Holdout estimation</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>In order to save you some typing <code>mlr</code> contains some pre-defined resample descriptions for very common strategies like holdout (<code>hout</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)) as well as cross-validation with different numbers of folds (e.g., <code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) or <code>cv10</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">hout</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">## Predict: test</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">## Stratification: FALSE</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">cv3</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">## Predict: test</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="performing-the-resampling" class="section level1">
<h1 class="hasAnchor">
<a href="#performing-the-resampling" class="anchor"></a>Performing the resampling</h1>
<p>Function <code><a href="../../reference/resample.html">resample()</a></code> evaluates a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) on a given machine learning <code><a href="../../reference/Task.html">Task()</a></code> using the selected resampling strategy (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<p>As a first example, the performance of linear regression (<code><a href="http://www.rdocumentation.org/packages/stats/topics/lm">stats::lm()</a></code>) on the <code>BostonHousing</code> (<code><a href="http://www.rdocumentation.org/packages/mlbench/topics/BostonHousing">mlbench::BostonHousing()</a></code>) data set is calculated using <em>3-fold cross-validation</em>.</p>
<p>Generally, for <em><span class="math inline">\(K\)</span>-fold cross-validation</em> the data set <span class="math inline">\(D\)</span> is partitioned into <span class="math inline">\(K\)</span> subsets of (approximately) equal size. In the <span class="math inline">\(b\)</span>-th of the <span class="math inline">\(K\)</span> iterations, the <span class="math inline">\(b\)</span>-th subset is used for testing, while the union of the remaining parts forms the training set.</p>
<p>As usual, you can either pass a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) object to <code><a href="../../reference/resample.html">resample()</a></code> or, as done here, provide the class name <code>"regr.lm"</code> of the learner. Since no performance measure is specified the default for regression learners (mean squared error, <a href="measures.html" target="_blank">mse</a>) is calculated.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Specify the resampling strategy (3-fold cross-validation)</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co"># Calculate the performance</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">## Measures:             mse</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">## [Resample] iter 1:    28.5024706</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">## [Resample] iter 2:    24.2179536</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">## [Resample] iter 3:    17.9904670</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb4-12" data-line-number="12">## Aggregated Result: mse.test.mean=23.5702970</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb4-14" data-line-number="14"></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">r</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">## Resample Result</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">## Learner: regr.lm</a>
<a class="sourceLine" id="cb4-19" data-line-number="19">## Aggr perf: mse.test.mean=23.5702970</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">## Runtime: 0.0428841</a></code></pre></div>
<p>The result <code>r</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> result. It contains performance results for the learner and some additional information like the runtime, predicted values, and optionally the models fitted in single resampling iterations.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Peak into r</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">names</span>(r)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">##  [1] "learner.id"     "task.id"        "task.desc"      "measures.train"</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">##  [5] "measures.test"  "aggr"           "pred"           "models"        </a>
<a class="sourceLine" id="cb5-5" data-line-number="5">##  [9] "err.msgs"       "err.dumps"      "extract"        "runtime"</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">## mse.test.mean </a>
<a class="sourceLine" id="cb5-9" data-line-number="9">##       23.5703</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">r<span class="op">$</span>measures.test</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">##   iter      mse</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">## 1    1 28.50247</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">## 2    2 24.21795</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">## 3    3 17.99047</a></code></pre></div>
<p><code>r$measures.test</code> gives the performance on each of the 3 test data sets. <code>r$aggr</code> shows the aggregated performance value. Its name <code>"mse.test.mean"</code> indicates the performance measure, <a href="measures.html" target="_blank">mse</a>, and the method, <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), used to aggregate the 3 individual performances. <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) is the default aggregation scheme for most performance measures and, as the name implies, takes the mean over the performances on the test data sets.</p>
<p>Resampling in <code>mlr</code> works the same way for all types of learning problems and learners. Below is a classification example where a classification tree (rpart) (<code><a href="http://www.rdocumentation.org/packages/rpart/topics/rpart">rpart::rpart()</a></code>) is evaluated on the <code>Sonar</code> (<code>mlbench::sonar()</code>) data set by subsampling with 5 iterations.</p>
<p>In each subsampling iteration the data set <span class="math inline">\(D\)</span> is randomly partitioned into a training and a test set according to a given percentage, e.g., 2/3 training and 1/3 test set. If there is just one iteration, the strategy is commonly called <em>holdout</em> or <em>test sample estimation</em>.</p>
<p>You can calculate several measures at once by passing a <code>list</code> of Measures (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>)s to <code><a href="../../reference/resample.html">resample()</a></code>. Below, the error rate (<a href="measures.html" target="_blank">mmce</a>), false positive and false negative rates (<a href="measures.html" target="_blank">fpr</a>, <a href="measures.html" target="_blank">fnr</a>), and the time it takes to train the learner (<a href="measures.html" target="_blank">timetrain</a>) are estimated by <em>subsampling</em> with 5 iterations.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Subsampling with 5 iterations and default split ratio 2/3</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co"># Subsampling with 5 iterations and 4/5 training data</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>, <span class="dt">split =</span> <span class="dv">4</span><span class="op">/</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co"># Classification tree with information splitting criterion</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>))</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co"># Calculate the performance measures</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(lrn, sonar.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain))</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">## Resampling: subsampling</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">## Measures:             mmce        fpr         fnr         timetrain</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">## [Resample] iter 1:    0.2619048   0.3500000   0.1818182   0.0180000</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">## [Resample] iter 2:    0.2380952   0.2105263   0.2608696   0.0150000</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">## [Resample] iter 3:    0.2380952   0.4444444   0.0833333   0.0160000</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">## [Resample] iter 4:    0.3095238   0.2727273   0.3500000   0.0150000</a>
<a class="sourceLine" id="cb6-18" data-line-number="18">## [Resample] iter 5:    0.1904762   0.2941176   0.1200000   0.0140000</a>
<a class="sourceLine" id="cb6-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb6-20" data-line-number="20">## Aggregated Result: mmce.test.mean=0.2476190,fpr.test.mean=0.3143631,fnr.test.mean=0.1992042,timetrain.test.mean=0.0156000</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">## </a>
<a class="sourceLine" id="cb6-22" data-line-number="22"></a>
<a class="sourceLine" id="cb6-23" data-line-number="23">r</a>
<a class="sourceLine" id="cb6-24" data-line-number="24">## Resample Result</a>
<a class="sourceLine" id="cb6-25" data-line-number="25">## Task: Sonar-example</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb6-27" data-line-number="27">## Aggr perf: mmce.test.mean=0.2476190,fpr.test.mean=0.3143631,fnr.test.mean=0.1992042,timetrain.test.mean=0.0156000</a>
<a class="sourceLine" id="cb6-28" data-line-number="28">## Runtime: 0.139542</a></code></pre></div>
<p>If you want to add further measures afterwards, use <code><a href="../../reference/addRRMeasure.html">addRRMeasure()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Add balanced error rate (ber) and time used to predict</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../../reference/addRRMeasure.html">addRRMeasure</a></span>(r, <span class="kw">list</span>(ber, timepredict))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">## Resample Result</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">## Task: Sonar-example</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">## Aggr perf: mmce.test.mean=0.2476190,fpr.test.mean=0.3143631,fnr.test.mean=0.1992042,timetrain.test.mean=0.0156000,ber.test.mean=0.2567837,timepredict.test.mean=0.0056000</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">## Runtime: 0.139542</a></code></pre></div>
<p>By default, <code><a href="../../reference/resample.html">resample()</a></code> prints progress messages and intermediate results. You can turn this off by setting <code>show.info = FALSE</code>, as done in the code chunk below. (If you are interested in suppressing these messages permanently have a look at the tutorial page about <a href="configureMlr.html" target="_blank">configuring mlr</a>.)</p>
<p>In the above example, the Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) was explicitly constructed. For convenience you can also specify the learner as a string and pass any learner parameters via the <code>...</code> argument of <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>), sonar.task, rdesc,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain), <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">## Task: Sonar-example</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">## Aggr perf: mmce.test.mean=0.2857143,fpr.test.mean=0.2974200,fnr.test.mean=0.2785093,timetrain.test.mean=0.0156000</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">## Runtime: 0.124804</a></code></pre></div>
</div>
<div id="accessing-resample-results" class="section level1">
<h1 class="hasAnchor">
<a href="#accessing-resample-results" class="anchor"></a>Accessing resample results</h1>
<p>Apart from the learner performance you can extract further information from the resample results, for example predicted values or the models fitted in individual resample iterations.</p>
<div id="predictions" class="section level2">
<h2 class="hasAnchor">
<a href="#predictions" class="anchor"></a>Predictions</h2>
<p>Per default, the <code><a href="../../reference/resample.html">resample()</a></code> result contains the predictions made during the resampling. If you do not want to keep them, e.g., in order to conserve memory, set <code>keep.pred = FALSE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<p>The predictions are stored in slot <code>$pred</code> of the resampling result, which can also be accessed by function <code><a href="../../reference/getRRPredictions.html">getRRPredictions()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">r<span class="op">$</span>pred</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb9-8" data-line-number="8">## time (mean): 0.00</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">## 1 204     M        M    1 test</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">## 2 120     M        M    1 test</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">## 3 195     M        M    1 test</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">## 4 135     M        R    1 test</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">## 5  15     R        R    1 test</a>
<a class="sourceLine" id="cb9-15" data-line-number="15">## 6 114     M        R    1 test</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">## ... (#rows: 210, #cols: 5)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17"></a>
<a class="sourceLine" id="cb9-18" data-line-number="18">pred =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictions.html">getRRPredictions</a></span>(r)</a>
<a class="sourceLine" id="cb9-19" data-line-number="19">pred</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-22" data-line-number="22">## Predict: test</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-24" data-line-number="24">## predict.type: response</a>
<a class="sourceLine" id="cb9-25" data-line-number="25">## threshold: </a>
<a class="sourceLine" id="cb9-26" data-line-number="26">## time (mean): 0.00</a>
<a class="sourceLine" id="cb9-27" data-line-number="27">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-28" data-line-number="28">## 1 204     M        M    1 test</a>
<a class="sourceLine" id="cb9-29" data-line-number="29">## 2 120     M        M    1 test</a>
<a class="sourceLine" id="cb9-30" data-line-number="30">## 3 195     M        M    1 test</a>
<a class="sourceLine" id="cb9-31" data-line-number="31">## 4 135     M        R    1 test</a>
<a class="sourceLine" id="cb9-32" data-line-number="32">## 5  15     R        R    1 test</a>
<a class="sourceLine" id="cb9-33" data-line-number="33">## 6 114     M        R    1 test</a>
<a class="sourceLine" id="cb9-34" data-line-number="34">## ... (#rows: 210, #cols: 5)</a></code></pre></div>
<p><code>pred</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> Prediction. Just as a <code><a href="../../reference/Prediction.html">Prediction()</a></code> object (see the tutorial page on making <a href="predict.html" target="_blank">predictions</a> it has an element <code>$data</code> which is a <code>data.frame</code> that contains the predictions and in the case of a supervised learning problem the true values of the target variable(s). You can use <code>as.data.frame</code> (<code><a href="../../reference/Prediction.html">Prediction()</a></code> to directly access the <code>$data</code> slot. Moreover, all getter functions for <code><a href="../../reference/Prediction.html">Prediction()</a></code> objects like <code><a href="../../reference/getPredictionResponse.html">getPredictionResponse()</a></code> or <code><a href="../../reference/getPredictionProbabilities.html">getPredictionProbabilities()</a></code> are applicable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">head</span>(<span class="kw">as.data.frame</span>(pred))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">##    id truth response iter  set</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">## 1 204     M        M    1 test</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">## 2 120     M        M    1 test</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">## 3 195     M        M    1 test</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">## 4 135     M        R    1 test</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">## 5  15     R        R    1 test</a>
<a class="sourceLine" id="cb10-8" data-line-number="8">## 6 114     M        R    1 test</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionTruth</a></span>(pred))</a>
<a class="sourceLine" id="cb10-11" data-line-number="11">## [1] M M M M R M</a>
<a class="sourceLine" id="cb10-12" data-line-number="12">## Levels: M R</a>
<a class="sourceLine" id="cb10-13" data-line-number="13"></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionResponse</a></span>(pred))</a>
<a class="sourceLine" id="cb10-15" data-line-number="15">## [1] M M M R R R</a>
<a class="sourceLine" id="cb10-16" data-line-number="16">## Levels: M R</a></code></pre></div>
<p>The columns <code>iter</code> and <code>set</code> in the <code>data.frame</code> indicate the resampling iteration and the data set (<code>train</code> or <code>test</code>) for which the prediction was made.</p>
<p>By default, predictions are made for the test sets only. If predictions for the training set are required, set <code>predict = "train"</code> (for predictions on the train set only) or <code>predict = "both"</code> (for predictions on both train and test sets) in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. In any case, this is necessary for some bootstrap methods (<em>b632</em> and <em>b632+</em>) and some examples are shown later on.</p>
<p>Below, we use simple Holdout, i.e., split the data once into a training and test set, as resampling strategy and make predictions on both sets.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Make predictions on both training and test sets</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb11-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0200000</a>
<a class="sourceLine" id="cb11-10" data-line-number="10">## Runtime: 0.0135126</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"></a>
<a class="sourceLine" id="cb11-12" data-line-number="12">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">##   iter mmce</a>
<a class="sourceLine" id="cb11-14" data-line-number="14">## 1    1 0.03</a></code></pre></div>
<p>(Please note that nonetheless the misclassification rate <code>r$aggr</code> is estimated on the test data only. How to calculate performance measures on the training sets is shown below.)</p>
<p>A second function to extract predictions from resample results is <code><a href="../../reference/getRRPredictionList.html">getRRPredictionList()</a></code> which returns a <code>list</code> of predictions split by data set (train/test) and resampling iteration.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">predList =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictionList.html">getRRPredictionList</a></span>(r)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">predList</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">## $train</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">## $train$`1`</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">## Prediction: 100 observations</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb12-8" data-line-number="8">## time: 0.00</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">##      id      truth   response</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">## 13   13     setosa     setosa</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">## 135 135  virginica  virginica</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">## 59   59 versicolor versicolor</a>
<a class="sourceLine" id="cb12-13" data-line-number="13">## 39   39     setosa     setosa</a>
<a class="sourceLine" id="cb12-14" data-line-number="14">## 98   98 versicolor versicolor</a>
<a class="sourceLine" id="cb12-15" data-line-number="15">## 55   55 versicolor versicolor</a>
<a class="sourceLine" id="cb12-16" data-line-number="16">## ... (#rows: 100, #cols: 3)</a>
<a class="sourceLine" id="cb12-17" data-line-number="17">## </a>
<a class="sourceLine" id="cb12-18" data-line-number="18">## </a>
<a class="sourceLine" id="cb12-19" data-line-number="19">## $test</a>
<a class="sourceLine" id="cb12-20" data-line-number="20">## $test$`1`</a>
<a class="sourceLine" id="cb12-21" data-line-number="21">## Prediction: 50 observations</a>
<a class="sourceLine" id="cb12-22" data-line-number="22">## predict.type: response</a>
<a class="sourceLine" id="cb12-23" data-line-number="23">## threshold: </a>
<a class="sourceLine" id="cb12-24" data-line-number="24">## time: 0.00</a>
<a class="sourceLine" id="cb12-25" data-line-number="25">##      id      truth   response</a>
<a class="sourceLine" id="cb12-26" data-line-number="26">## 27   27     setosa     setosa</a>
<a class="sourceLine" id="cb12-27" data-line-number="27">## 86   86 versicolor versicolor</a>
<a class="sourceLine" id="cb12-28" data-line-number="28">## 109 109  virginica  virginica</a>
<a class="sourceLine" id="cb12-29" data-line-number="29">## 127 127  virginica  virginica</a>
<a class="sourceLine" id="cb12-30" data-line-number="30">## 6     6     setosa     setosa</a>
<a class="sourceLine" id="cb12-31" data-line-number="31">## 120 120  virginica versicolor</a>
<a class="sourceLine" id="cb12-32" data-line-number="32">## ... (#rows: 50, #cols: 3)</a></code></pre></div>
</div>
<div id="learner-models" class="section level2">
<h2 class="hasAnchor">
<a href="#learner-models" class="anchor"></a>Learner models</h2>
<p>In each resampling iteration a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) is fitted on the respective training set. By default, the resulting <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>)s are not included in the <code><a href="../../reference/resample.html">resample()</a></code> result and slot <code>$models</code> is empty. In order to keep them, set <code>models = TRUE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>, as in the following survival analysis example.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"surv.coxph"</span>, lung.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">models =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">r<span class="op">$</span>models</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">## [[1]]</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">## Trained on: task.id = lung-example; obs = 112; features = 8</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb13-11" data-line-number="11">## [[2]]</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-14" data-line-number="14">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-15" data-line-number="15">## </a>
<a class="sourceLine" id="cb13-16" data-line-number="16">## [[3]]</a>
<a class="sourceLine" id="cb13-17" data-line-number="17">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-18" data-line-number="18">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-19" data-line-number="19">## Hyperparameters:</a></code></pre></div>
</div>
<div id="the-extract-option" class="section level2">
<h2 class="hasAnchor">
<a href="#the-extract-option" class="anchor"></a>The extract option</h2>
<p>Keeping complete fitted models can be memory-intensive if these objects are large or the number of resampling iterations is high. Alternatively, you can use the <code>extract</code> argument of <code><a href="../../reference/resample.html">resample()</a></code> to retain only the information you need. To this end you need to pass a function to <code>extract</code> which is applied to each <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>) object fitted in each resampling iteration.</p>
<p>Below, we cluster the <code><a href="http://www.rdocumentation.org/packages/datasets/topics/mtcars">datasets::mtcars()</a></code> data using the <span class="math inline">\(k\)</span>-means algorithm with <span class="math inline">\(k = 3\)</span> and keep only the cluster centers.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># Extract the compute cluster centers</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"cluster.kmeans"</span>, mtcars.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  <span class="dt">centers =</span> <span class="dv">3</span>, <span class="dt">extract =</span> <span class="cf">function</span>(x) <span class="kw"><a href="../../reference/getLearnerModel.html">getLearnerModel</a></span>(x)<span class="op">$</span>centers)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">## Warning in rgl.init(initValue, onlyNULL): RGL: unable to open X11 display</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">## Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb14-10" data-line-number="10">## This is package 'modeest' written by P. PONCET.</a>
<a class="sourceLine" id="cb14-11" data-line-number="11">## For a complete list of functions, use 'library(help = "modeest")' or 'help.start()'.</a>
<a class="sourceLine" id="cb14-12" data-line-number="12">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">## [[1]]</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">##      mpg cyl    disp      hp  drat       wt   qsec  vs    am  gear carb</a>
<a class="sourceLine" id="cb14-15" data-line-number="15">## 1 15.175   8 338.325 193.625 3.260 3.770625 16.835 0.0 0.125 3.250  3.0</a>
<a class="sourceLine" id="cb14-16" data-line-number="16">## 2 27.675   4  96.175  82.375 4.120 2.168500 19.225 1.0 0.875 4.125  1.5</a>
<a class="sourceLine" id="cb14-17" data-line-number="17">## 3 19.600   6 191.120 124.600 3.456 3.152000 18.216 0.6 0.400 3.800  3.2</a>
<a class="sourceLine" id="cb14-18" data-line-number="18">## </a>
<a class="sourceLine" id="cb14-19" data-line-number="19">## [[2]]</a>
<a class="sourceLine" id="cb14-20" data-line-number="20">##        mpg      cyl     disp        hp     drat       wt     qsec</a>
<a class="sourceLine" id="cb14-21" data-line-number="21">## 1 14.77500 8.000000 372.5000 232.37500 3.346250 4.035500 16.18875</a>
<a class="sourceLine" id="cb14-22" data-line-number="22">## 2 19.08571 6.285714 199.8571 132.28571 3.467143 3.287857 18.03143</a>
<a class="sourceLine" id="cb14-23" data-line-number="23">## 3 25.40000 4.000000 113.7667  77.16667 4.125000 2.415833 19.50500</a>
<a class="sourceLine" id="cb14-24" data-line-number="24">##          vs        am     gear     carb</a>
<a class="sourceLine" id="cb14-25" data-line-number="25">## 1 0.0000000 0.2500000 3.500000 4.000000</a>
<a class="sourceLine" id="cb14-26" data-line-number="26">## 2 0.5714286 0.2857143 3.714286 3.285714</a>
<a class="sourceLine" id="cb14-27" data-line-number="27">## 3 0.8333333 0.5000000 4.000000 1.666667</a>
<a class="sourceLine" id="cb14-28" data-line-number="28">## </a>
<a class="sourceLine" id="cb14-29" data-line-number="29">## [[3]]</a>
<a class="sourceLine" id="cb14-30" data-line-number="30">##        mpg cyl     disp        hp     drat       wt     qsec        vs</a>
<a class="sourceLine" id="cb14-31" data-line-number="31">## 1 26.91429 4.0 102.0429  90.57143 4.022857 2.179000 18.59857 0.8571429</a>
<a class="sourceLine" id="cb14-32" data-line-number="32">## 2 21.40000 5.5 158.5750 101.25000 3.852500 3.031250 17.94500 0.5000000</a>
<a class="sourceLine" id="cb14-33" data-line-number="33">## 3 15.16364 8.0 356.7636 206.36364 3.136364 4.132636 17.09364 0.0000000</a>
<a class="sourceLine" id="cb14-34" data-line-number="34">##           am     gear     carb</a>
<a class="sourceLine" id="cb14-35" data-line-number="35">## 1 0.85714286 4.142857 1.428571</a>
<a class="sourceLine" id="cb14-36" data-line-number="36">## 2 0.50000000 4.000000 3.500000</a>
<a class="sourceLine" id="cb14-37" data-line-number="37">## 3 0.09090909 3.181818 3.545455</a></code></pre></div>
<p>As a second example, we extract the variable importances from fitted regression trees using function <code><a href="../../reference/getFeatureImportance.html">getFeatureImportance()</a></code>. (For more detailed information on this topic see the <a href="feature_selection.html" target="_blank">feature selection</a> page.)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Extract the variable importance in a regression tree</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">extract =</span> getFeatureImportance)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">## [[1]]</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb15-8" data-line-number="8">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">## Measure: NA</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">## Contrast: NA</a>
<a class="sourceLine" id="cb15-11" data-line-number="11">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">## Replace: NA</a>
<a class="sourceLine" id="cb15-13" data-line-number="13">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-14" data-line-number="14">## Local: FALSE</a>
<a class="sourceLine" id="cb15-15" data-line-number="15">##       crim       zn    indus chas      nox       rm      age      dis rad</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">## 1 7621.035 5339.139 9584.785    0 8777.666 12558.89 2493.534 3282.907   0</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">##        tax  ptratio b    lstat</a>
<a class="sourceLine" id="cb15-18" data-line-number="18">## 1 1980.741 1045.975 0 16473.29</a>
<a class="sourceLine" id="cb15-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb15-20" data-line-number="20">## [[2]]</a>
<a class="sourceLine" id="cb15-21" data-line-number="21">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-22" data-line-number="22">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-23" data-line-number="23">## </a>
<a class="sourceLine" id="cb15-24" data-line-number="24">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-25" data-line-number="25">## Measure: NA</a>
<a class="sourceLine" id="cb15-26" data-line-number="26">## Contrast: NA</a>
<a class="sourceLine" id="cb15-27" data-line-number="27">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-28" data-line-number="28">## Replace: NA</a>
<a class="sourceLine" id="cb15-29" data-line-number="29">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-30" data-line-number="30">## Local: FALSE</a>
<a class="sourceLine" id="cb15-31" data-line-number="31">##     crim       zn    indus chas      nox      rm      age      dis</a>
<a class="sourceLine" id="cb15-32" data-line-number="32">## 1 3012.2 1422.085 3912.995    0 2742.971 17251.9 2122.892 2137.336</a>
<a class="sourceLine" id="cb15-33" data-line-number="33">##        rad      tax  ptratio       b    lstat</a>
<a class="sourceLine" id="cb15-34" data-line-number="34">## 1 976.6615 1384.628 3688.324 170.165 11073.33</a>
<a class="sourceLine" id="cb15-35" data-line-number="35">## </a>
<a class="sourceLine" id="cb15-36" data-line-number="36">## [[3]]</a>
<a class="sourceLine" id="cb15-37" data-line-number="37">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-38" data-line-number="38">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-39" data-line-number="39">## </a>
<a class="sourceLine" id="cb15-40" data-line-number="40">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-41" data-line-number="41">## Measure: NA</a>
<a class="sourceLine" id="cb15-42" data-line-number="42">## Contrast: NA</a>
<a class="sourceLine" id="cb15-43" data-line-number="43">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-44" data-line-number="44">## Replace: NA</a>
<a class="sourceLine" id="cb15-45" data-line-number="45">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-46" data-line-number="46">## Local: FALSE</a>
<a class="sourceLine" id="cb15-47" data-line-number="47">##      crim      zn    indus     chas      nox       rm      age      dis</a>
<a class="sourceLine" id="cb15-48" data-line-number="48">## 1 1294.04 1236.81 4715.259 350.7777 3495.693 15958.96 3165.177 3514.462</a>
<a class="sourceLine" id="cb15-49" data-line-number="49">##        rad      tax  ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-50" data-line-number="50">## 1 96.70578 3393.715 2953.442 728.5895 11951.06</a></code></pre></div>
<p>There is also an convenience function <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices()</a></code> to extract the resampling indices from the <code>ResampleResult</code> object:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(r)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">## $train.inds</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">## $train.inds[[1]]</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">##   [1] 174 163  80  44  33  47 429  25 211   7 260  13 361 378 501 232 315</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">##  [18] 448 381  46 207 408 333 435 463 458 161 188 486  75 416 135 492 485</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">##  [35] 469  94 205 263 441 406 240 213 365 447  85 233   1 132   2  28 162</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">##  [52] 440  59  69 337  51 167 309  26  45 289 442 246  24 319 334 143 124</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">##  [69] 391 192 453 400 224 212 222 237 468 467 150 235 102 479 342 376 141</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">##  [86] 147 368 362 269 166 208  16 194 311 172 422 178 490  30 482 470 119</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">## [103] 380 503 466 209 148  90 339 363 483 372 445 455 502  84 183 421 335</a>
<a class="sourceLine" id="cb16-11" data-line-number="11">## [120] 341 189  77 154 278 256 427 491 384 313 405  39 415  41 418 158 484</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">## [137] 223  64 303  21 206 385 356 354 101 382 328   8 228 338 126 144 359</a>
<a class="sourceLine" id="cb16-13" data-line-number="13">## [154] 351 397  57 352 261 145 401 480 496  78 111 437  19 136 394 426 198</a>
<a class="sourceLine" id="cb16-14" data-line-number="14">## [171] 229 130 390 412 366 216 113 316 210 438 251 498 430 349 264 411 257</a>
<a class="sourceLine" id="cb16-15" data-line-number="15">## [188]  11 129 244  95 432 396   4 184 374 277 300 177 329 459 414  65  15</a>
<a class="sourceLine" id="cb16-16" data-line-number="16">## [205]  86 489 355 301  63 388   3 399  36 180 217 159 423 324 176 227  14</a>
<a class="sourceLine" id="cb16-17" data-line-number="17">## [222] 226 504 266 186  22 137 286  74 201 364  62 310 332  38 116 114  53</a>
<a class="sourceLine" id="cb16-18" data-line-number="18">## [239] 326 350 107  71 343 238 179 488 410 307 268 478 138 345 373 493 225</a>
<a class="sourceLine" id="cb16-19" data-line-number="19">## [256]  34 170 151  23 451 168 402  87 347  32 255  54 108 371 262 444 146</a>
<a class="sourceLine" id="cb16-20" data-line-number="20">## [273] 292 443 157  97 495  37 409   5 121 407 293  43 369 252 465 477 320</a>
<a class="sourceLine" id="cb16-21" data-line-number="21">## [290]  31 336 142 386 474 241 358 152 299   6 133 291 417 325  66 346 420</a>
<a class="sourceLine" id="cb16-22" data-line-number="22">## [307] 248 259  58  89 450 370 105 239  93 203 395 360 140  56 302 153  68</a>
<a class="sourceLine" id="cb16-23" data-line-number="23">## [324] 243 475 249 306 506  49 117 236 204 457 452 321 193 304</a>
<a class="sourceLine" id="cb16-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb16-25" data-line-number="25">## $train.inds[[2]]</a>
<a class="sourceLine" id="cb16-26" data-line-number="26">##   [1] 305 461 174 163  80 271 187 234 392  33 431  47 247   9 499 211  82</a>
<a class="sourceLine" id="cb16-27" data-line-number="27">##  [18]  35 155   7 260 361 312  40 315 448 298  12  46 207 221 435 463  17</a>
<a class="sourceLine" id="cb16-28" data-line-number="28">##  [35] 188 486 284  20  75 135 128 156 469 383 205 434  60 213 365 283  85</a>
<a class="sourceLine" id="cb16-29" data-line-number="29">##  [52] 403 132   2 446 440 318 337 167 218  10 500  45 289 164 280 190 200</a>
<a class="sourceLine" id="cb16-30" data-line-number="30">##  [69]  27 319 334 134 143 124 192 253 505 433 285 453 425 215 294 212 222</a>
<a class="sourceLine" id="cb16-31" data-line-number="31">##  [86] 237  50 468 202  70 150 102 479 376 279 147 368 106 245 127 322 449</a>
<a class="sourceLine" id="cb16-32" data-line-number="32">## [103] 131 166 288 173  16 379 276 115 194 311 462 274 481 456  30 482 119</a>
<a class="sourceLine" id="cb16-33" data-line-number="33">## [120] 380 220 503 191  90 339 169  42 363 502 341 389 154 278 256  67 472</a>
<a class="sourceLine" id="cb16-34" data-line-number="34">## [137] 427 195 405 272  99 197 348 460  76 158 484 223  81  21 287 476 356</a>
<a class="sourceLine" id="cb16-35" data-line-number="35">## [154] 112 354 101 382 375 338 126 494 144 327 359  91 393  52 436 352 357</a>
<a class="sourceLine" id="cb16-36" data-line-number="36">## [171] 139 145 109 480 111 437 424 136 160 308 198  88 267 295 353  18 413</a>
<a class="sourceLine" id="cb16-37" data-line-number="37">## [188]  92 390  55 199 412 366 419 113 316 296  83 210 438 219 498 430 270</a>
<a class="sourceLine" id="cb16-38" data-line-number="38">## [205] 349 314 264 411 257   4 184 497 374 277 300 177 254 317 459 487  73</a>
<a class="sourceLine" id="cb16-39" data-line-number="39">## [222] 330 122 367  63 377 323 104 399  36 180 217 103 324 120 186 250 281</a>
<a class="sourceLine" id="cb16-40" data-line-number="40">## [239]  74 201 125 231 175 273 149 171 196  29 116 123 297 350 343  96 238</a>
<a class="sourceLine" id="cb16-41" data-line-number="41">## [256] 179 428 410 307 268 478 454 282 138  98 345 373 493 275  72 225 344</a>
<a class="sourceLine" id="cb16-42" data-line-number="42">## [273] 170  61 151  23 402  79  32 255 185  54 108 371 262 464 444  48 292</a>
<a class="sourceLine" id="cb16-43" data-line-number="43">## [290] 258 471 157  97  37 409 473   5 121 407 252 320 336 230 165 241 439</a>
<a class="sourceLine" id="cb16-44" data-line-number="44">## [307] 214 299 133 346 420 248  89 181 182 398 450 290 370 105 404 395 360</a>
<a class="sourceLine" id="cb16-45" data-line-number="45">## [324] 265 140 302 340 387 306 110 117 236 204 118 100 242 331</a>
<a class="sourceLine" id="cb16-46" data-line-number="46">## </a>
<a class="sourceLine" id="cb16-47" data-line-number="47">## $train.inds[[3]]</a>
<a class="sourceLine" id="cb16-48" data-line-number="48">##   [1] 305 461 271 187 234 392  44 431 429 247   9  25 499  82  35 155  13</a>
<a class="sourceLine" id="cb16-49" data-line-number="49">##  [18] 378 312  40 501 232 298  12 381 408 221 333  17 458 161 284  20 416</a>
<a class="sourceLine" id="cb16-50" data-line-number="50">##  [35] 492 485 128 156 383  94 263 441 406 240 434  60 283 447 233   1 403</a>
<a class="sourceLine" id="cb16-51" data-line-number="51">##  [52] 446  28 162 318  59  69  51 218 309  10 500  26 164 442 246 280 190</a>
<a class="sourceLine" id="cb16-52" data-line-number="52">##  [69] 200  24  27 134 391 253 505 433 285 400 425 215 224 294  50 467 202</a>
<a class="sourceLine" id="cb16-53" data-line-number="53">##  [86]  70 235 342 279 141 106 245 127 322 362 449 131 269 208 288 173 379</a>
<a class="sourceLine" id="cb16-54" data-line-number="54">## [103] 276 115 172 422 462 178 274 481 490 456 470 220 191 466 209 148 169</a>
<a class="sourceLine" id="cb16-55" data-line-number="55">## [120]  42 483 372 445 455  84 183 421 335 189 389  77  67 472 491 384 195</a>
<a class="sourceLine" id="cb16-56" data-line-number="56">## [137] 313 272  99 197 348 460  39 415  76  41 418  64  81 303 287 476 206</a>
<a class="sourceLine" id="cb16-57" data-line-number="57">## [154] 385 112 375 328   8 228 494 327  91 351 397 393  57  52 436 357 139</a>
<a class="sourceLine" id="cb16-58" data-line-number="58">## [171] 261 401 109 496  78 424  19 394 160 308 426  88 229 130 267 295 353</a>
<a class="sourceLine" id="cb16-59" data-line-number="59">## [188]  18 413  92  55 199 216 419 296  83 219 251 270 314  11 129 244  95</a>
<a class="sourceLine" id="cb16-60" data-line-number="60">## [205] 432 396 497 329 254 317 414  65  15 487  86 489  73 355 330 301 122</a>
<a class="sourceLine" id="cb16-61" data-line-number="61">## [222] 367 388 377   3 323 104 159 423 103 176 227  14 226 504 266 120 250</a>
<a class="sourceLine" id="cb16-62" data-line-number="62">## [239] 281  22 137 286 125 364 231 175  62 273 149 310 332 171 196  29  38</a>
<a class="sourceLine" id="cb16-63" data-line-number="63">## [256] 114 123  53 297 326 107  71  96 428 488 454 282  98 275  72  34 344</a>
<a class="sourceLine" id="cb16-64" data-line-number="64">## [273]  61 451 168  87 347  79 185 464 146  48 443 258 471 495 473 293  43</a>
<a class="sourceLine" id="cb16-65" data-line-number="65">## [290] 369 465 477  31 230 165 142 386 474 439 358 152 214   6 291 417 325</a>
<a class="sourceLine" id="cb16-66" data-line-number="66">## [307]  66 259  58 181 182 398 290 239 404  93 203 265  56 153  68 340 243</a>
<a class="sourceLine" id="cb16-67" data-line-number="67">## [324] 475 249 387 506 110  49 118 457 452 321 193 100 242 331 304</a>
<a class="sourceLine" id="cb16-68" data-line-number="68">## </a>
<a class="sourceLine" id="cb16-69" data-line-number="69">## </a>
<a class="sourceLine" id="cb16-70" data-line-number="70">## $test.inds</a>
<a class="sourceLine" id="cb16-71" data-line-number="71">## $test.inds[[1]]</a>
<a class="sourceLine" id="cb16-72" data-line-number="72">##   [1]   9  10  12  17  18  20  27  29  35  40  42  48  50  52  55  60  61</a>
<a class="sourceLine" id="cb16-73" data-line-number="73">##  [18]  67  70  72  73  76  79  81  82  83  88  91  92  96  98  99 100 103</a>
<a class="sourceLine" id="cb16-74" data-line-number="74">##  [35] 104 106 109 110 112 115 118 120 122 123 125 127 128 131 134 139 149</a>
<a class="sourceLine" id="cb16-75" data-line-number="75">##  [52] 155 156 160 164 165 169 171 173 175 181 182 185 187 190 191 195 196</a>
<a class="sourceLine" id="cb16-76" data-line-number="76">##  [69] 197 199 200 202 214 215 218 219 220 221 230 231 234 242 245 247 250</a>
<a class="sourceLine" id="cb16-77" data-line-number="77">##  [86] 253 254 258 265 267 270 271 272 273 274 275 276 279 280 281 282 283</a>
<a class="sourceLine" id="cb16-78" data-line-number="78">## [103] 284 285 287 288 290 294 295 296 297 298 305 308 312 314 317 318 322</a>
<a class="sourceLine" id="cb16-79" data-line-number="79">## [120] 323 327 330 331 340 344 348 353 357 367 375 377 379 383 387 389 392</a>
<a class="sourceLine" id="cb16-80" data-line-number="80">## [137] 393 398 403 404 413 419 424 425 428 431 433 434 436 439 446 449 454</a>
<a class="sourceLine" id="cb16-81" data-line-number="81">## [154] 456 460 461 462 464 471 472 473 476 481 487 494 497 499 500 505</a>
<a class="sourceLine" id="cb16-82" data-line-number="82">## </a>
<a class="sourceLine" id="cb16-83" data-line-number="83">## $test.inds[[2]]</a>
<a class="sourceLine" id="cb16-84" data-line-number="84">##   [1]   1   3   6   8  11  13  14  15  19  22  24  25  26  28  31  34  38</a>
<a class="sourceLine" id="cb16-85" data-line-number="85">##  [18]  39  41  43  44  49  51  53  56  57  58  59  62  64  65  66  68  69</a>
<a class="sourceLine" id="cb16-86" data-line-number="86">##  [35]  71  77  78  84  86  87  93  94  95 107 114 129 130 137 141 142 146</a>
<a class="sourceLine" id="cb16-87" data-line-number="87">##  [52] 148 152 153 159 161 162 168 172 176 178 183 189 193 203 206 208 209</a>
<a class="sourceLine" id="cb16-88" data-line-number="88">##  [69] 216 224 226 227 228 229 232 233 235 239 240 243 244 246 249 251 259</a>
<a class="sourceLine" id="cb16-89" data-line-number="89">##  [86] 261 263 266 269 286 291 293 301 303 304 309 310 313 321 325 326 328</a>
<a class="sourceLine" id="cb16-90" data-line-number="90">## [103] 329 332 333 335 342 347 351 355 358 362 364 369 372 378 381 384 385</a>
<a class="sourceLine" id="cb16-91" data-line-number="91">## [120] 386 388 391 394 396 397 400 401 406 408 414 415 416 417 418 421 422</a>
<a class="sourceLine" id="cb16-92" data-line-number="92">## [137] 423 426 429 432 441 442 443 445 447 451 452 455 457 458 465 466 467</a>
<a class="sourceLine" id="cb16-93" data-line-number="93">## [154] 470 474 475 477 483 485 488 489 490 491 492 495 496 501 504 506</a>
<a class="sourceLine" id="cb16-94" data-line-number="94">## </a>
<a class="sourceLine" id="cb16-95" data-line-number="95">## $test.inds[[3]]</a>
<a class="sourceLine" id="cb16-96" data-line-number="96">##   [1]   2   4   5   7  16  21  23  30  32  33  36  37  45  46  47  54  63</a>
<a class="sourceLine" id="cb16-97" data-line-number="97">##  [18]  74  75  80  85  89  90  97 101 102 105 108 111 113 116 117 119 121</a>
<a class="sourceLine" id="cb16-98" data-line-number="98">##  [35] 124 126 132 133 135 136 138 140 143 144 145 147 150 151 154 157 158</a>
<a class="sourceLine" id="cb16-99" data-line-number="99">##  [52] 163 166 167 170 174 177 179 180 184 186 188 192 194 198 201 204 205</a>
<a class="sourceLine" id="cb16-100" data-line-number="100">##  [69] 207 210 211 212 213 217 222 223 225 236 237 238 241 248 252 255 256</a>
<a class="sourceLine" id="cb16-101" data-line-number="101">##  [86] 257 260 262 264 268 277 278 289 292 299 300 302 306 307 311 315 316</a>
<a class="sourceLine" id="cb16-102" data-line-number="102">## [103] 319 320 324 334 336 337 338 339 341 343 345 346 349 350 352 354 356</a>
<a class="sourceLine" id="cb16-103" data-line-number="103">## [120] 359 360 361 363 365 366 368 370 371 373 374 376 380 382 390 395 399</a>
<a class="sourceLine" id="cb16-104" data-line-number="104">## [137] 402 405 407 409 410 411 412 420 427 430 435 437 438 440 444 448 450</a>
<a class="sourceLine" id="cb16-105" data-line-number="105">## [154] 453 459 463 468 469 478 479 480 482 484 486 493 498 502 503</a></code></pre></div>
</div>
</div>
<div id="stratification-blocking-and-grouping" class="section level1">
<h1 class="hasAnchor">
<a href="#stratification-blocking-and-grouping" class="anchor"></a>Stratification, Blocking and Grouping</h1>
<ul>
<li><p><em>Stratification</em> with respect to a categorical variable makes sure that all its values are present in each training and test set in approximately the same proportion as in the original data set. Stratification is possible with regard to categorical target variables (and thus for supervised classification and survival analysis) or categorical explanatory variables.</p></li>
<li><p><em>Blocking</em> refers to the situation that subsets of observations belong together and must not be separated during resampling. Hence, for one train/test set pair the entire block is either in the training set or in the test set.</p></li>
<li><p><em>Grouping</em> means that the folds are composed out of a factor vector given by the user. In this setting no repetitions are possible as all folds are predefined. The approach can also be used in a nested resampling setting. Note the subtle but important difference to “Blocking”: In “Blocking” factor levels are respected when splitting into train and test (e.g. the test set could be composed out of two given factor levels) whereas in “Grouping” the folds will strictly follow the factor level grouping (meaning that the test set will always only consist of one factor level).</p></li>
</ul>
<div id="stratification-with-respect-to-the-target-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-with-respect-to-the-target-variables" class="anchor"></a>Stratification with respect to the target variable(s)</h2>
<p>For classification, it is usually desirable to have the same proportion of the classes in all of the partitions of the original data set. This is particularly useful in the case of imbalanced classes and small data sets. Otherwise, it may happen that observations of less frequent classes are missing in some of the training sets which can decrease the performance of the learner, or lead to model crashes. In order to conduct stratified resampling, set <code>stratify = TRUE</code> in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"></a>
<a class="sourceLine" id="cb17-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0200163</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">## Runtime: 0.224637</a></code></pre></div>
<p>Stratification is also available for survival tasks. Here the stratification balances the censoring rate.</p>
</div>
<div id="stratification-with-respect-to-explanatory-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-with-respect-to-explanatory-variables" class="anchor"></a>Stratification with respect to explanatory variables</h2>
<p>Sometimes it is required to also stratify on the input data, e.g., to ensure that all subgroups are represented in all training and test sets. To stratify on the input columns, specify <code>factor</code> columns of your task data via <code>stratify.cols</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">## Aggr perf: mse.test.mean=23.8023330</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">## Runtime: 0.0288064</a></code></pre></div>
</div>
<div id="blocking-cv-with-flexible-predefined-indices" class="section level2">
<h2 class="hasAnchor">
<a href="#blocking-cv-with-flexible-predefined-indices" class="anchor"></a>Blocking: CV with flexible predefined indices</h2>
<p>If some observations “belong together” and must not be separated when splitting the data into training and test sets for resampling, you can supply this information via a <code>blocking</code> factor when creating the <a href="task.html" target="_blank">task</a>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># 5 blocks containing 30 observations each</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">task =<span class="st"> </span><span class="kw"><a href="../../reference/Task.html">makeClassifTask</a></span>(<span class="dt">data =</span> iris, <span class="dt">target =</span> <span class="st">"Species"</span>, <span class="dt">blocking =</span> <span class="kw">factor</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">each =</span> <span class="dv">30</span>)))</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">task</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">## Supervised task: iris</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">## Type: classif</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">## Target: Species</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">## Observations: 150</a>
<a class="sourceLine" id="cb19-8" data-line-number="8">## Features:</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">##    numerics     factors     ordered functionals </a>
<a class="sourceLine" id="cb19-10" data-line-number="10">##           4           0           0           0 </a>
<a class="sourceLine" id="cb19-11" data-line-number="11">## Missings: FALSE</a>
<a class="sourceLine" id="cb19-12" data-line-number="12">## Has weights: FALSE</a>
<a class="sourceLine" id="cb19-13" data-line-number="13">## Has blocking: TRUE</a>
<a class="sourceLine" id="cb19-14" data-line-number="14">## Has coordinates: FALSE</a>
<a class="sourceLine" id="cb19-15" data-line-number="15">## Classes: 3</a>
<a class="sourceLine" id="cb19-16" data-line-number="16">##     setosa versicolor  virginica </a>
<a class="sourceLine" id="cb19-17" data-line-number="17">##         50         50         50 </a>
<a class="sourceLine" id="cb19-18" data-line-number="18">## Positive class: NA</a></code></pre></div>
<p>When performing a simple “CV” resampling and inspecting the result, we see that the training indices in fold 1 correspond to the specified grouping set in <code>blocking</code> in the task. To initiate this method, we need to set <code>blocking.cv = TRUE</code> when creating the resample description object.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">blocking.cv =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, task, rdesc)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">## Measures:             mmce</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">## [Resample] iter 1:    0.0500000</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">## [Resample] iter 2:    0.1000000</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">## [Resample] iter 3:    0.0000000</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">## </a>
<a class="sourceLine" id="cb20-9" data-line-number="9">## Aggregated Result: mmce.test.mean=0.0500000</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb20-11" data-line-number="11"></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="kw">sort</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb20-13" data-line-number="13">##  [1]  31  32  33  34  35  36  37  38  39  40  41  42  43  44  45  46  47</a>
<a class="sourceLine" id="cb20-14" data-line-number="14">## [18]  48  49  50  51  52  53  54  55  56  57  58  59  60  61  62  63  64</a>
<a class="sourceLine" id="cb20-15" data-line-number="15">## [35]  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81</a>
<a class="sourceLine" id="cb20-16" data-line-number="16">## [52]  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98</a>
<a class="sourceLine" id="cb20-17" data-line-number="17">## [69]  99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115</a>
<a class="sourceLine" id="cb20-18" data-line-number="18">## [86] 116 117 118 119 120</a></code></pre></div>
<p>However, please note the effects of this method: The created folds will not have the same size! Here, Fold 1 has a 120/30 split while the other two folds have a 90/60 split.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">lapply</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds, <span class="cf">function</span>(x) <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">## [[1]]</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">## [1] 90</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb21-5" data-line-number="5">## [[2]]</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">## [1] 120</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb21-8" data-line-number="8">## [[3]]</a>
<a class="sourceLine" id="cb21-9" data-line-number="9">## [1] 90</a></code></pre></div>
<p>This is caused by the fact that we supplied five groups that must belong together but only used a three fold resampling strategy here.</p>
</div>
<div id="grouping-cv-with-fixed-predefined-indices" class="section level2">
<h2 class="hasAnchor">
<a href="#grouping-cv-with-fixed-predefined-indices" class="anchor"></a>Grouping: CV with fixed predefined indices</h2>
<p>There is a second way of using predefined indices in resampling in <code>mlr</code>: Constructing the folds based on the supplied indices in <code>blocking</code>. We refer to this method here as “grouping” to distinguish it from “blocking”. This method is more restrictive in the way that it will always use the number of levels supplied via <code>blocking</code> as the number of folds. To use this method, we need to set <code>fixed = TRUE</code> instead of <code>blocking.cv</code> when creating the resampling description object.</p>
<p>We can leave out the <code>iters</code> argument, as it will be set internally to the number of supplied factor levels.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, task, rdesc)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">## Warning in instantiateResampleInstance.CVDesc(desc, size, task): Adjusting</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">## levels to match number of blocking levels.</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">## Measures:             mmce</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">## [Resample] iter 1:    0.0000000</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">## [Resample] iter 2:    0.0000000</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">## [Resample] iter 3:    0.1000000</a>
<a class="sourceLine" id="cb22-10" data-line-number="10">## [Resample] iter 4:    0.0000000</a>
<a class="sourceLine" id="cb22-11" data-line-number="11">## [Resample] iter 5:    0.1000000</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">## </a>
<a class="sourceLine" id="cb22-13" data-line-number="13">## Aggregated Result: mmce.test.mean=0.0400000</a>
<a class="sourceLine" id="cb22-14" data-line-number="14">## </a>
<a class="sourceLine" id="cb22-15" data-line-number="15"><span class="kw">sort</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb22-16" data-line-number="16">##   [1]  31  32  33  34  35  36  37  38  39  40  41  42  43  44  45  46  47</a>
<a class="sourceLine" id="cb22-17" data-line-number="17">##  [18]  48  49  50  51  52  53  54  55  56  57  58  59  60  61  62  63  64</a>
<a class="sourceLine" id="cb22-18" data-line-number="18">##  [35]  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81</a>
<a class="sourceLine" id="cb22-19" data-line-number="19">##  [52]  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98</a>
<a class="sourceLine" id="cb22-20" data-line-number="20">##  [69]  99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115</a>
<a class="sourceLine" id="cb22-21" data-line-number="21">##  [86] 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132</a>
<a class="sourceLine" id="cb22-22" data-line-number="22">## [103] 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149</a>
<a class="sourceLine" id="cb22-23" data-line-number="23">## [120] 150</a></code></pre></div>
<p>You can see that we automatically created five folds in which the test set always corresponds to one factor level.</p>
<p>Doing it this way also means that we cannot do repeated CV because there is no way to create multiple shuffled folds of this fixed arrangement.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">lapply</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds, <span class="cf">function</span>(x) <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">## [[1]]</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">## [1] 120</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb23-5" data-line-number="5">## [[2]]</a>
<a class="sourceLine" id="cb23-6" data-line-number="6">## [1] 120</a>
<a class="sourceLine" id="cb23-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb23-8" data-line-number="8">## [[3]]</a>
<a class="sourceLine" id="cb23-9" data-line-number="9">## [1] 120</a>
<a class="sourceLine" id="cb23-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb23-11" data-line-number="11">## [[4]]</a>
<a class="sourceLine" id="cb23-12" data-line-number="12">## [1] 120</a>
<a class="sourceLine" id="cb23-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb23-14" data-line-number="14">## [[5]]</a>
<a class="sourceLine" id="cb23-15" data-line-number="15">## [1] 120</a></code></pre></div>
<p>However, this method can also be used in nested resampling settings (e.g. in hyperparameter tuning). In the inner level, the factor levels are honored and the function simply creates one fold less than in the outer level.</p>
<p>Please note that the <code>iters</code> argument has no effect in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> if <code>fixed = TRUE</code>. The number of folds will be automatically set based on the supplied number of factor levels via <code>blocking</code>. In the inner level, the number of folds will simply be one less than in the outer level.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># test fixed in nested resampling</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.lda"</span>)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">ctrl &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span>(<span class="dt">maxit =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4">ps &lt;-<span class="st"> </span><span class="kw">makeParamSet</span>(<span class="kw">makeNumericParam</span>(<span class="st">"nu"</span>, <span class="dt">lower =</span> <span class="dv">2</span>, <span class="dt">upper =</span> <span class="dv">20</span>))</a>
<a class="sourceLine" id="cb24-5" data-line-number="5">inner =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb24-6" data-line-number="6">outer =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb24-7" data-line-number="7">tune_wrapper =<span class="st"> </span><span class="kw"><a href="../../reference/makeTuneWrapper.html">makeTuneWrapper</a></span>(lrn, <span class="dt">resampling =</span> inner, <span class="dt">par.set =</span> ps,</a>
<a class="sourceLine" id="cb24-8" data-line-number="8">  <span class="dt">control =</span> ctrl, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb24-9" data-line-number="9"></a>
<a class="sourceLine" id="cb24-10" data-line-number="10">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(tune_wrapper, task, outer, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb24-11" data-line-number="11">  <span class="dt">extract =</span> getTuneResult)</a></code></pre></div>
<p>To check on the inner resampling indices, you can call <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices(inner = TRUE)</a></code>. You can see that for every outer fold (List of 5), four inner folds were created that respect the grouping supplied via the <code>blocking</code> argument.</p>
<p>Of course you can also use a normal random sampling “CV” description in the inner level by just setting <code>fixed = FALSE</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">str</span>(<span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(p, <span class="dt">inner =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">## List of 5</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-5" data-line-number="5">##   .. ..$ : int [1:90] 33 82 36 46 61 27 118 40 90 3 ...</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">##   .. ..$ : int [1:90] 82 36 66 61 27 34 81 118 40 3 ...</a>
<a class="sourceLine" id="cb25-7" data-line-number="7">##   .. ..$ : int [1:90] 33 82 46 66 61 27 34 81 40 90 ...</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">##   .. ..$ : int [1:90] 33 36 46 66 34 81 118 90 3 103 ...</a>
<a class="sourceLine" id="cb25-9" data-line-number="9">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-10" data-line-number="10">##   .. ..$ : int [1:30] 1 2 9 12 14 15 21 26 28 29 ...</a>
<a class="sourceLine" id="cb25-11" data-line-number="11">##   .. ..$ : int [1:30] 5 24 30 33 37 39 45 46 51 54 ...</a>
<a class="sourceLine" id="cb25-12" data-line-number="12">##   .. ..$ : int [1:30] 3 6 13 17 18 19 22 25 36 41 ...</a>
<a class="sourceLine" id="cb25-13" data-line-number="13">##   .. ..$ : int [1:30] 4 7 8 10 11 16 20 23 27 38 ...</a>
<a class="sourceLine" id="cb25-14" data-line-number="14">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-15" data-line-number="15">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-16" data-line-number="16">##   .. ..$ : int [1:90] 116 18 19 9 40 14 115 61 39 53 ...</a>
<a class="sourceLine" id="cb25-17" data-line-number="17">##   .. ..$ : int [1:90] 116 18 69 37 9 64 40 14 115 53 ...</a>
<a class="sourceLine" id="cb25-18" data-line-number="18">##   .. ..$ : int [1:90] 18 19 69 37 9 64 14 115 61 39 ...</a>
<a class="sourceLine" id="cb25-19" data-line-number="19">##   .. ..$ : int [1:90] 116 19 69 37 64 40 61 39 112 34 ...</a>
<a class="sourceLine" id="cb25-20" data-line-number="20">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-21" data-line-number="21">##   .. ..$ : int [1:30] 4 24 29 31 34 37 44 45 49 52 ...</a>
<a class="sourceLine" id="cb25-22" data-line-number="22">##   .. ..$ : int [1:30] 2 5 11 15 16 17 19 25 32 39 ...</a>
<a class="sourceLine" id="cb25-23" data-line-number="23">##   .. ..$ : int [1:30] 1 8 12 13 21 22 23 26 27 30 ...</a>
<a class="sourceLine" id="cb25-24" data-line-number="24">##   .. ..$ : int [1:30] 3 6 7 9 10 14 18 20 28 36 ...</a>
<a class="sourceLine" id="cb25-25" data-line-number="25">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-26" data-line-number="26">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-27" data-line-number="27">##   .. ..$ : int [1:90] 21 68 60 13 112 119 43 118 24 50 ...</a>
<a class="sourceLine" id="cb25-28" data-line-number="28">##   .. ..$ : int [1:90] 21 28 68 98 13 43 2 50 41 62 ...</a>
<a class="sourceLine" id="cb25-29" data-line-number="29">##   .. ..$ : int [1:90] 28 60 98 112 119 118 2 24 41 62 ...</a>
<a class="sourceLine" id="cb25-30" data-line-number="30">##   .. ..$ : int [1:90] 21 28 68 60 98 13 112 119 43 118 ...</a>
<a class="sourceLine" id="cb25-31" data-line-number="31">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-32" data-line-number="32">##   .. ..$ : int [1:30] 1 2 7 9 11 14 18 27 28 29 ...</a>
<a class="sourceLine" id="cb25-33" data-line-number="33">##   .. ..$ : int [1:30] 4 6 10 15 16 17 19 24 37 42 ...</a>
<a class="sourceLine" id="cb25-34" data-line-number="34">##   .. ..$ : int [1:30] 3 8 12 13 20 21 22 25 26 32 ...</a>
<a class="sourceLine" id="cb25-35" data-line-number="35">##   .. ..$ : int [1:30] 5 23 30 34 39 41 44 45 48 52 ...</a>
<a class="sourceLine" id="cb25-36" data-line-number="36">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-37" data-line-number="37">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-38" data-line-number="38">##   .. ..$ : int [1:90] 120 26 12 51 97 32 92 45 10 91 ...</a>
<a class="sourceLine" id="cb25-39" data-line-number="39">##   .. ..$ : int [1:90] 118 120 89 70 97 32 92 9 10 119 ...</a>
<a class="sourceLine" id="cb25-40" data-line-number="40">##   .. ..$ : int [1:90] 118 89 70 26 12 51 97 32 92 9 ...</a>
<a class="sourceLine" id="cb25-41" data-line-number="41">##   .. ..$ : int [1:90] 118 120 89 70 26 12 51 9 45 91 ...</a>
<a class="sourceLine" id="cb25-42" data-line-number="42">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-43" data-line-number="43">##   .. ..$ : int [1:30] 1 2 9 13 15 18 24 33 35 36 ...</a>
<a class="sourceLine" id="cb25-44" data-line-number="44">##   .. ..$ : int [1:30] 5 7 8 11 12 19 23 26 34 45 ...</a>
<a class="sourceLine" id="cb25-45" data-line-number="45">##   .. ..$ : int [1:30] 4 6 14 20 21 22 25 30 42 47 ...</a>
<a class="sourceLine" id="cb25-46" data-line-number="46">##   .. ..$ : int [1:30] 3 10 16 17 27 28 29 31 32 38 ...</a>
<a class="sourceLine" id="cb25-47" data-line-number="47">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-48" data-line-number="48">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-49" data-line-number="49">##   .. ..$ : int [1:90] 43 82 113 15 4 17 76 104 41 94 ...</a>
<a class="sourceLine" id="cb25-50" data-line-number="50">##   .. ..$ : int [1:90] 43 27 113 12 4 37 118 17 108 84 ...</a>
<a class="sourceLine" id="cb25-51" data-line-number="51">##   .. ..$ : int [1:90] 82 27 113 12 15 37 118 108 84 76 ...</a>
<a class="sourceLine" id="cb25-52" data-line-number="52">##   .. ..$ : int [1:90] 43 82 27 12 15 4 37 118 17 108 ...</a>
<a class="sourceLine" id="cb25-53" data-line-number="53">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-54" data-line-number="54">##   .. ..$ : int [1:30] 1 2 8 12 13 16 19 27 29 30 ...</a>
<a class="sourceLine" id="cb25-55" data-line-number="55">##   .. ..$ : int [1:30] 3 9 14 15 21 22 23 25 26 33 ...</a>
<a class="sourceLine" id="cb25-56" data-line-number="56">##   .. ..$ : int [1:30] 4 6 7 10 11 17 18 20 28 41 ...</a>
<a class="sourceLine" id="cb25-57" data-line-number="57">##   .. ..$ : int [1:30] 5 24 31 35 39 42 48 49 53 56 ...</a></code></pre></div>
</div>
</div>
<div id="resample-descriptions-and-resample-instances" class="section level1">
<h1 class="hasAnchor">
<a href="#resample-descriptions-and-resample-instances" class="anchor"></a>Resample descriptions and resample instances</h1>
<p>As already mentioned, you can specify a resampling strategy using function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">rdesc</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb26-6" data-line-number="6"></a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="kw">str</span>(rdesc)</a>
<a class="sourceLine" id="cb26-8" data-line-number="8">## List of 6</a>
<a class="sourceLine" id="cb26-9" data-line-number="9">##  $ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb26-10" data-line-number="10">##  $ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb26-11" data-line-number="11">##  $ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb26-12" data-line-number="12">##  $ iters      : int 3</a>
<a class="sourceLine" id="cb26-13" data-line-number="13">##  $ predict    : chr "test"</a>
<a class="sourceLine" id="cb26-14" data-line-number="14">##  $ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb26-15" data-line-number="15">##  - attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb26-16" data-line-number="16"></a>
<a class="sourceLine" id="cb26-17" data-line-number="17"><span class="kw">str</span>(<span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>))</a>
<a class="sourceLine" id="cb26-18" data-line-number="18">## List of 8</a>
<a class="sourceLine" id="cb26-19" data-line-number="19">##  $ split        : num 0.667</a>
<a class="sourceLine" id="cb26-20" data-line-number="20">##  $ id           : chr "subsampling"</a>
<a class="sourceLine" id="cb26-21" data-line-number="21">##  $ iters        : int 30</a>
<a class="sourceLine" id="cb26-22" data-line-number="22">##  $ predict      : chr "test"</a>
<a class="sourceLine" id="cb26-23" data-line-number="23">##  $ stratify     : logi FALSE</a>
<a class="sourceLine" id="cb26-24" data-line-number="24">##  $ stratify.cols: chr "chas"</a>
<a class="sourceLine" id="cb26-25" data-line-number="25">##  $ fixed        : logi FALSE</a>
<a class="sourceLine" id="cb26-26" data-line-number="26">##  $ blocking.cv  : logi FALSE</a>
<a class="sourceLine" id="cb26-27" data-line-number="27">##  - attr(*, "class")= chr [1:2] "SubsampleDesc" "ResampleDesc"</a></code></pre></div>
<p>The result <code>rdesc</code> inherits from class <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) (short for resample description) and, in principle, contains all necessary information about the resampling strategy including the number of iterations, the proportion of training and test sets, stratification variables, etc.</p>
<p>Given either the size of the data set at hand or the <code><a href="../../reference/Task.html">Task()</a></code>, function <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> draws the training and test sets according to the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co"># Create a resample instance based an a task</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, iris.task)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">rin</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb21-5" data-line-number="5">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">## Predict: test</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">## Stratification: FALSE</a>
<a class="sourceLine" id="cb21-8" data-line-number="8"></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb21-10" data-line-number="10">## List of 5</a>
<a class="sourceLine" id="cb21-11" data-line-number="11">##  $ desc      :List of 4</a>
<a class="sourceLine" id="cb21-12" data-line-number="12">##   ..$ id      : chr "cross-validation"</a>
<a class="sourceLine" id="cb21-13" data-line-number="13">##   ..$ iters   : int 3</a>
<a class="sourceLine" id="cb21-14" data-line-number="14">##   ..$ predict : chr "test"</a>
<a class="sourceLine" id="cb21-15" data-line-number="15">##   ..$ stratify: logi FALSE</a>
<a class="sourceLine" id="cb21-16" data-line-number="16">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb21-17" data-line-number="17">##  $ size      : int 150</a>
<a class="sourceLine" id="cb21-18" data-line-number="18">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb21-19" data-line-number="19">##   ..$ : int [1:100] 116 14 121 42 84 6 148 120 85 56 ...</a>
<a class="sourceLine" id="cb21-20" data-line-number="20">##   ..$ : int [1:100] 118 14 121 89 106 84 6 148 120 76 ...</a>
<a class="sourceLine" id="cb21-21" data-line-number="21">##   ..$ : int [1:100] 118 116 89 106 42 76 85 56 146 5 ...</a>
<a class="sourceLine" id="cb21-22" data-line-number="22">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb21-23" data-line-number="23">##   ..$ : int [1:50] 4 9 11 12 15 17 20 26 28 29 ...</a>
<a class="sourceLine" id="cb21-24" data-line-number="24">##   ..$ : int [1:50] 1 2 3 5 8 10 18 21 23 25 ...</a>
<a class="sourceLine" id="cb21-25" data-line-number="25">##   ..$ : int [1:50] 6 7 13 14 16 19 22 24 30 32 ...</a>
<a class="sourceLine" id="cb21-26" data-line-number="26">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb21-27" data-line-number="27">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb21-28" data-line-number="28"></a>
<a class="sourceLine" id="cb21-29" data-line-number="29"><span class="co"># Create a resample instance given the size of the data set</span></a>
<a class="sourceLine" id="cb21-30" data-line-number="30">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">size =</span> <span class="kw">nrow</span>(iris))</a>
<a class="sourceLine" id="cb21-31" data-line-number="31"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb21-32" data-line-number="32">## List of 5</a>
<a class="sourceLine" id="cb21-33" data-line-number="33">##  $ desc      :List of 4</a>
<a class="sourceLine" id="cb21-34" data-line-number="34">##   ..$ id      : chr "cross-validation"</a>
<a class="sourceLine" id="cb21-35" data-line-number="35">##   ..$ iters   : int 3</a>
<a class="sourceLine" id="cb21-36" data-line-number="36">##   ..$ predict : chr "test"</a>
<a class="sourceLine" id="cb21-37" data-line-number="37">##   ..$ stratify: logi FALSE</a>
<a class="sourceLine" id="cb21-38" data-line-number="38">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb21-39" data-line-number="39">##  $ size      : int 150</a>
<a class="sourceLine" id="cb21-40" data-line-number="40">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb21-41" data-line-number="41">##   ..$ : int [1:100] 32 45 84 20 63 50 11 18 22 146 ...</a>
<a class="sourceLine" id="cb21-42" data-line-number="42">##   ..$ : int [1:100] 32 56 100 63 109 11 18 53 22 136 ...</a>
<a class="sourceLine" id="cb21-43" data-line-number="43">##   ..$ : int [1:100] 45 56 100 84 20 109 50 53 146 136 ...</a>
<a class="sourceLine" id="cb21-44" data-line-number="44">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb21-45" data-line-number="45">##   ..$ : int [1:50] 5 6 8 9 10 16 19 24 29 39 ...</a>
<a class="sourceLine" id="cb21-46" data-line-number="46">##   ..$ : int [1:50] 3 4 7 12 14 15 20 21 23 25 ...</a>
<a class="sourceLine" id="cb21-47" data-line-number="47">##   ..$ : int [1:50] 1 2 11 13 17 18 22 26 27 28 ...</a>
<a class="sourceLine" id="cb21-48" data-line-number="48">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb21-49" data-line-number="49">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb21-50" data-line-number="50"></a>
<a class="sourceLine" id="cb21-51" data-line-number="51"><span class="co"># Access the indices of the training observations in iteration 3</span></a>
<a class="sourceLine" id="cb21-52" data-line-number="52">rin<span class="op">$</span>train.inds[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb21-53" data-line-number="53">##   [1]  45  56 100  84  20 109  50  53 146 136  86   9  62  25  41  95 103</a>
<a class="sourceLine" id="cb21-54" data-line-number="54">##  [18]  78  57  76 129 112   6 104  29  23  51  21 118  67  12   7  55 107</a>
<a class="sourceLine" id="cb21-55" data-line-number="55">##  [35]  73 138   4   5 122  98  75  90   3 143  14  40 125   8  89 141  16</a>
<a class="sourceLine" id="cb21-56" data-line-number="56">##  [52]  91 139  43  82  92  35 140  94  68  87  42  46  88 126 115  77  64</a>
<a class="sourceLine" id="cb21-57" data-line-number="57">##  [69]  70  10  37 149  44  83  47  97 134  39  24 101  59 121  15 119 131</a>
<a class="sourceLine" id="cb21-58" data-line-number="58">##  [86] 113 110 117  60  72  85 135  19  34 133 137 127 102  81 128</a></code></pre></div>
<p>The result <code>rin</code> inherits from class <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) and contains <code>list</code>s of index vectors for the train and test sets.</p>
<p>If a <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) is passed to <code><a href="../../reference/resample.html">resample()</a></code>, it is instantiated internally. Naturally, it is also possible to pass a <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) directly.</p>
<p>While the separation between resample descriptions, resample instances, and the <code><a href="../../reference/resample.html">resample()</a></code> function itself seems overly complicated, it has several advantages:</p>
<ul>
<li>Resample instances readily allow for paired experiments, that is comparing the performance of several learners on exactly the same training and test sets. This is particularly useful if you want to add another method to a comparison experiment you already did. Moreover, you can store the resample instance along with your data in order to be able to reproduce your results later on.</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">task =</span> iris.task)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="co"># Calculate the performance of two learners based on the same resample instance</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5">r.lda =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">r.rpart =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">r.lda<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">## mmce.test.mean </a>
<a class="sourceLine" id="cb22-9" data-line-number="9">##     0.02666667</a>
<a class="sourceLine" id="cb22-10" data-line-number="10"></a>
<a class="sourceLine" id="cb22-11" data-line-number="11">r.rpart<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">## mmce.test.mean </a>
<a class="sourceLine" id="cb22-13" data-line-number="13">##           0.06</a></code></pre></div>
<ul>
<li>In order to add further resampling methods you can simply derive from the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) and <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) classes, but you do neither have to touch <code><a href="../../reference/resample.html">resample()</a></code> nor any further methods that use the resampling strategy.</li>
</ul>
<p>Usually, when calling <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> the train and test index sets are drawn randomly. Mainly for <em>holdout</em> (<em>test sample</em>) <em>estimation</em> you might want full control about the training and tests set and specify them manually. This can be done using function <code><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance()</a></code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance</a></span>(<span class="dt">train.inds =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">test.inds =</span> <span class="dv">101</span><span class="op">:</span><span class="dv">150</span>, <span class="dt">size =</span> <span class="dv">150</span>)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">rin</a>
<a class="sourceLine" id="cb29-3" data-line-number="3">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb29-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb29-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb29-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="aggregating-performance-values" class="section level1">
<h1 class="hasAnchor">
<a href="#aggregating-performance-values" class="anchor"></a>Aggregating performance values</h1>
<p>In each resampling iteration <span class="math inline">\(b = 1,\ldots,B\)</span> we get performance values <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> (for each measure we wish to calculate), which are then aggregated to an overall performance.</p>
<p>For the great majority of common resampling strategies (like holdout, cross-validation, subsampling) performance values are calculated on the test data sets only and for most measures aggregated by taking the mean (<code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>)).</p>
<p>Each performance <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) in <code>mlr</code> has a corresponding default aggregation method which is stored in slot <code>$aggr</code>. The default aggregation for most measures is <code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>). One exception is the root mean square error (<a href="measures.html" target="_blank">rmse</a>).</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># Mean misclassification error</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">mmce<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">## Aggregation function: test.mean</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"></a>
<a class="sourceLine" id="cb24-5" data-line-number="5">mmce<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb24-6" data-line-number="6">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb24-7" data-line-number="7">## mean(perf.test)</a>
<a class="sourceLine" id="cb24-8" data-line-number="8">## &lt;bytecode: 0xcc1c7a0&gt;</a>
<a class="sourceLine" id="cb24-9" data-line-number="9">## &lt;environment: namespace:mlr&gt;</a>
<a class="sourceLine" id="cb24-10" data-line-number="10"></a>
<a class="sourceLine" id="cb24-11" data-line-number="11"><span class="co"># Root mean square error</span></a>
<a class="sourceLine" id="cb24-12" data-line-number="12">rmse<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb24-13" data-line-number="13">## Aggregation function: test.rmse</a>
<a class="sourceLine" id="cb24-14" data-line-number="14"></a>
<a class="sourceLine" id="cb24-15" data-line-number="15">rmse<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb24-16" data-line-number="16">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb24-17" data-line-number="17">## sqrt(mean(perf.test^2))</a>
<a class="sourceLine" id="cb24-18" data-line-number="18">## &lt;bytecode: 0x14456b98&gt;</a>
<a class="sourceLine" id="cb24-19" data-line-number="19">## &lt;environment: namespace:mlr&gt;</a></code></pre></div>
<p>You can change the aggregation method of a <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) via function <code><a href="../../reference/setAggregation.html">setAggregation()</a></code>. All available aggregation schemes are listed on the <code><a href="../../reference/aggregations.html">aggregations()</a></code> documentation page.</p>
<div id="example-one-measure-with-different-aggregations" class="section level2">
<h2 class="hasAnchor">
<a href="#example-one-measure-with-different-aggregations" class="anchor"></a>Example: One measure with different aggregations</h2>
<p>The aggregation schemes <code>test.median</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), <code>test.min</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), and <code>text.max</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) compute the median, minimum, and maximum of the performance values on the test sets.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">mseTestMedian =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.median)</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">mseTestMin =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.min)</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">mseTestMax =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.max)</a>
<a class="sourceLine" id="cb25-4" data-line-number="4"></a>
<a class="sourceLine" id="cb25-5" data-line-number="5">mseTestMedian</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">## Name: Mean of squared errors</a>
<a class="sourceLine" id="cb25-7" data-line-number="7">## Performance measure: mse</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">## Properties: regr,req.pred,req.truth</a>
<a class="sourceLine" id="cb25-9" data-line-number="9">## Minimize: TRUE</a>
<a class="sourceLine" id="cb25-10" data-line-number="10">## Best: 0; Worst: Inf</a>
<a class="sourceLine" id="cb25-11" data-line-number="11">## Aggregated by: test.median</a>
<a class="sourceLine" id="cb25-12" data-line-number="12">## Arguments: list()</a>
<a class="sourceLine" id="cb25-13" data-line-number="13">## Note: Defined as: mean((response - truth)^2)</a>
<a class="sourceLine" id="cb25-14" data-line-number="14"></a>
<a class="sourceLine" id="cb25-15" data-line-number="15">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb25-16" data-line-number="16">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mseTestMedian, mseTestMin, mseTestMax))</a>
<a class="sourceLine" id="cb25-17" data-line-number="17">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb25-18" data-line-number="18">## Measures:             mse       mse       mse       mse</a>
<a class="sourceLine" id="cb25-19" data-line-number="19">## [Resample] iter 1:    30.934915130.934915130.934915130.9349151</a>
<a class="sourceLine" id="cb25-20" data-line-number="20">## [Resample] iter 2:    24.672065324.672065324.672065324.6720653</a>
<a class="sourceLine" id="cb25-21" data-line-number="21">## [Resample] iter 3:    20.287048220.287048220.287048220.2870482</a>
<a class="sourceLine" id="cb25-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb25-23" data-line-number="23">## Aggregated Result: mse.test.mean=25.2980095,mse.test.median=24.6720653,mse.test.min=20.2870482,mse.test.max=30.9349151</a>
<a class="sourceLine" id="cb25-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb25-25" data-line-number="25"></a>
<a class="sourceLine" id="cb25-26" data-line-number="26">r</a>
<a class="sourceLine" id="cb25-27" data-line-number="27">## Resample Result</a>
<a class="sourceLine" id="cb25-28" data-line-number="28">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb25-29" data-line-number="29">## Learner: regr.lm</a>
<a class="sourceLine" id="cb25-30" data-line-number="30">## Aggr perf: mse.test.mean=25.2980095,mse.test.median=24.6720653,mse.test.min=20.2870482,mse.test.max=30.9349151</a>
<a class="sourceLine" id="cb25-31" data-line-number="31">## Runtime: 0.0238559</a>
<a class="sourceLine" id="cb25-32" data-line-number="32"></a>
<a class="sourceLine" id="cb25-33" data-line-number="33">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb25-34" data-line-number="34">##   mse.test.mean mse.test.median    mse.test.min    mse.test.max </a>
<a class="sourceLine" id="cb25-35" data-line-number="35">##        25.29801        24.67207        20.28705        30.93492</a></code></pre></div>
</div>
<div id="example-calculating-the-training-error" class="section level2">
<h2 class="hasAnchor">
<a href="#example-calculating-the-training-error" class="anchor"></a>Example: Calculating the training error</h2>
<p>Below we calculate the mean misclassification error (<a href="measures.html" target="_blank">mmce</a>) on the training and the test data sets. Note that we have to set <code>predict = "both"</code> when calling <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> in order to get predictions on both training and test sets.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">mmceTrainMean =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, train.mean)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceTrainMean))</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">## Measures:             mmce.train   mmce.test</a>
<a class="sourceLine" id="cb26-6" data-line-number="6">## [Resample] iter 1:    0.0300000    0.0600000</a>
<a class="sourceLine" id="cb26-7" data-line-number="7">## [Resample] iter 2:    0.0300000    0.0800000</a>
<a class="sourceLine" id="cb26-8" data-line-number="8">## [Resample] iter 3:    0.0300000    0.0600000</a>
<a class="sourceLine" id="cb26-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb26-10" data-line-number="10">## Aggregated Result: mmce.test.mean=0.0666667,mmce.train.mean=0.0300000</a>
<a class="sourceLine" id="cb26-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb26-12" data-line-number="12"></a>
<a class="sourceLine" id="cb26-13" data-line-number="13">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb26-14" data-line-number="14">##   iter mmce mmce</a>
<a class="sourceLine" id="cb26-15" data-line-number="15">## 1    1 0.03 0.03</a>
<a class="sourceLine" id="cb26-16" data-line-number="16">## 2    2 0.03 0.03</a>
<a class="sourceLine" id="cb26-17" data-line-number="17">## 3    3 0.03 0.03</a>
<a class="sourceLine" id="cb26-18" data-line-number="18"></a>
<a class="sourceLine" id="cb26-19" data-line-number="19">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb26-20" data-line-number="20">##  mmce.test.mean mmce.train.mean </a>
<a class="sourceLine" id="cb26-21" data-line-number="21">##      0.06666667      0.03000000</a></code></pre></div>
</div>
<div id="example-bootstrap" class="section level2">
<h2 class="hasAnchor">
<a href="#example-bootstrap" class="anchor"></a>Example: Bootstrap</h2>
<p>In <em>out-of-bag bootstrap estimation</em> <span class="math inline">\(B\)</span> new data sets <span class="math inline">\(D^{*1}, \ldots, D^{*B}\)</span> are drawn from the data set <span class="math inline">\(D\)</span> with replacement, each of the same size as <span class="math inline">\(D\)</span>. In the <span class="math inline">\(b\)</span>-th iteration, <span class="math inline">\(D^{*b}\)</span> forms the training set, while the remaining elements from <span class="math inline">\(D\)</span>, i.e., <span class="math inline">\(D \setminus D^{*b}\)</span>, form the test set.</p>
<!--(
                     |resampling_desc_figure|

                     |resampling_nested_resampling_figure|
)-->
<p>The <em>b632</em> and <em>b632+</em> variants calculate a convex combination of the training performance and the out-of-bag bootstrap performance and thus require predictions on the training sets and an appropriate aggregation strategy.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># Use bootstrap as resampling strategy and predict on both train and test sets</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Bootstrap"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>, <span class="dt">iters =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="co"># Set aggregation schemes for b632 and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb27-5" data-line-number="5">mmceB632 =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632)</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">mmceB632plus =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632plus)</a>
<a class="sourceLine" id="cb27-7" data-line-number="7"></a>
<a class="sourceLine" id="cb27-8" data-line-number="8">mmceB632</a>
<a class="sourceLine" id="cb27-9" data-line-number="9">## Name: Mean misclassification error</a>
<a class="sourceLine" id="cb27-10" data-line-number="10">## Performance measure: mmce</a>
<a class="sourceLine" id="cb27-11" data-line-number="11">## Properties: classif,classif.multi,req.pred,req.truth</a>
<a class="sourceLine" id="cb27-12" data-line-number="12">## Minimize: TRUE</a>
<a class="sourceLine" id="cb27-13" data-line-number="13">## Best: 0; Worst: 1</a>
<a class="sourceLine" id="cb27-14" data-line-number="14">## Aggregated by: b632</a>
<a class="sourceLine" id="cb27-15" data-line-number="15">## Arguments: list()</a>
<a class="sourceLine" id="cb27-16" data-line-number="16">## Note: Defined as: mean(response != truth)</a>
<a class="sourceLine" id="cb27-17" data-line-number="17"></a>
<a class="sourceLine" id="cb27-18" data-line-number="18">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceB632, mmceB632plus),</a>
<a class="sourceLine" id="cb27-19" data-line-number="19">  <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb27-20" data-line-number="20"><span class="kw">head</span>(r<span class="op">$</span>measures.train)</a>
<a class="sourceLine" id="cb27-21" data-line-number="21">##   iter       mmce       mmce       mmce</a>
<a class="sourceLine" id="cb27-22" data-line-number="22">## 1    1 0.02666667 0.02666667 0.02666667</a>
<a class="sourceLine" id="cb27-23" data-line-number="23">## 2    2 0.01333333 0.01333333 0.01333333</a>
<a class="sourceLine" id="cb27-24" data-line-number="24">## 3    3 0.02666667 0.02666667 0.02666667</a>
<a class="sourceLine" id="cb27-25" data-line-number="25">## 4    4 0.02666667 0.02666667 0.02666667</a>
<a class="sourceLine" id="cb27-26" data-line-number="26">## 5    5 0.02000000 0.02000000 0.02000000</a>
<a class="sourceLine" id="cb27-27" data-line-number="27">## 6    6 0.05333333 0.05333333 0.05333333</a>
<a class="sourceLine" id="cb27-28" data-line-number="28"></a>
<a class="sourceLine" id="cb27-29" data-line-number="29"><span class="co"># Compare misclassification rates for out-of-bag, b632, and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb27-30" data-line-number="30">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb27-31" data-line-number="31">## mmce.test.mean      mmce.b632  mmce.b632plus </a>
<a class="sourceLine" id="cb27-32" data-line-number="32">##     0.04811318     0.04218353     0.04260017</a></code></pre></div>
</div>
</div>
<div id="convenience-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#convenience-functions" class="anchor"></a>Convenience functions</h1>
<p>The functionality described on this page allows for much control and flexibility. However, when quickly trying out some learners, it can get tedious to type all the code for defining the resampling strategy, setting the aggregation scheme and so on. As mentioned above, <code>mlr</code> includes some pre-defined resample description objects for frequently used strategies like, e.g., 5-fold cross-validation (<code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)). Moreover, <code>mlr</code> provides special functions for the most common resampling methods, for example <code>holdout</code> (<code><a href="../../reference/resample.html">resample()</a></code>), <code>crossval</code> (<code><a href="../../reference/resample.html">resample()</a></code>), or <code>bootstrapB632</code> (<code><a href="../../reference/resample.html">resample()</a></code>).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw"><a href="../../reference/resample.html">crossval</a></span>(<span class="st">"classif.lda"</span>, iris.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, ber))</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb28-3" data-line-number="3">## Measures:             mmce      ber</a>
<a class="sourceLine" id="cb28-4" data-line-number="4">## [Resample] iter 1:    0.0400000 0.0392157</a>
<a class="sourceLine" id="cb28-5" data-line-number="5">## [Resample] iter 2:    0.0200000 0.0185185</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">## [Resample] iter 3:    0.0000000 0.0000000</a>
<a class="sourceLine" id="cb28-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb28-8" data-line-number="8">## Aggregated Result: mmce.test.mean=0.0200000,ber.test.mean=0.0192447</a>
<a class="sourceLine" id="cb28-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb28-10" data-line-number="10">## Resample Result</a>
<a class="sourceLine" id="cb28-11" data-line-number="11">## Task: iris-example</a>
<a class="sourceLine" id="cb28-12" data-line-number="12">## Learner: classif.lda</a>
<a class="sourceLine" id="cb28-13" data-line-number="13">## Aggr perf: mmce.test.mean=0.0200000,ber.test.mean=0.0192447</a>
<a class="sourceLine" id="cb28-14" data-line-number="14">## Runtime: 0.0231464</a>
<a class="sourceLine" id="cb28-15" data-line-number="15"></a>
<a class="sourceLine" id="cb28-16" data-line-number="16"><span class="kw"><a href="../../reference/resample.html">bootstrapB632plus</a></span>(<span class="st">"regr.lm"</span>, bh.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mae))</a>
<a class="sourceLine" id="cb28-17" data-line-number="17">## Resampling: OOB bootstrapping</a>
<a class="sourceLine" id="cb28-18" data-line-number="18">## Measures:             mse.train   mae.train   mse.test    mae.test</a>
<a class="sourceLine" id="cb28-19" data-line-number="19">## [Resample] iter 1:    20.6217897  3.1545384   23.8673977  3.5476986</a>
<a class="sourceLine" id="cb28-20" data-line-number="20">## [Resample] iter 2:    18.4223275  2.9912441   32.2443749  3.7558772</a>
<a class="sourceLine" id="cb28-21" data-line-number="21">## [Resample] iter 3:    21.3428202  3.2037218   21.7386647  3.2936039</a>
<a class="sourceLine" id="cb28-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb28-23" data-line-number="23">## Aggregated Result: mse.b632plus=23.9414740,mae.b632plus=3.3891149</a>
<a class="sourceLine" id="cb28-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb28-25" data-line-number="25">## Resample Result</a>
<a class="sourceLine" id="cb28-26" data-line-number="26">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb28-27" data-line-number="27">## Learner: regr.lm</a>
<a class="sourceLine" id="cb28-28" data-line-number="28">## Aggr perf: mse.b632plus=23.9414740,mae.b632plus=3.3891149</a>
<a class="sourceLine" id="cb28-29" data-line-number="29">## Runtime: 0.0367162</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li>
<a href="#accessing-resample-results">Accessing resample results</a><ul class="nav nav-pills nav-stacked">
<li><a href="#predictions">Predictions</a></li>
      <li><a href="#learner-models">Learner models</a></li>
      <li><a href="#the-extract-option">The extract option</a></li>
      </ul>
</li>
      <li>
<a href="#stratification-blocking-and-grouping">Stratification, Blocking and Grouping</a><ul class="nav nav-pills nav-stacked">
<li><a href="#stratification-with-respect-to-the-target-variables">Stratification with respect to the target variable(s)</a></li>
      <li><a href="#stratification-with-respect-to-explanatory-variables">Stratification with respect to explanatory variables</a></li>
      <li><a href="#blocking-cv-with-flexible-predefined-indices">Blocking: CV with flexible predefined indices</a></li>
      <li><a href="#grouping-cv-with-fixed-predefined-indices">Grouping: CV with fixed predefined indices</a></li>
      </ul>
</li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li>
<a href="#aggregating-performance-values">Aggregating performance values</a><ul class="nav nav-pills nav-stacked">
<li><a href="#example-one-measure-with-different-aggregations">Example: One measure with different aggregations</a></li>
      <li><a href="#example-calculating-the-training-error">Example: Calculating the training error</a></li>
      <li><a href="#example-bootstrap">Example: Bootstrap</a></li>
      </ul>
</li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><!--<div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo, Patrick Schratz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
--></footer>
</div>

   
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript"> docsearch({
 apiKey: 'e300ecafdf04fe1199e3339c825ce7d0',
 indexName: 'mlr',
 inputSelector: 'input#search-input.form-control',
 debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>
